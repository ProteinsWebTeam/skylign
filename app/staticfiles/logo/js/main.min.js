/*

 HMM logo
 https://github.com/Janelia-Farm-Xfam/hmm_logo_js
 Copyright 2013, Jody Clements.
 Licensed under the MIT License.
 https://github.com/Janelia-Farm-Xfam/hmm_logo_js/blob/master/LICENSE.txt

 Scroller
 http://github.com/zynga/scroller

 Copyright 2011, Zynga Inc.
 Licensed under the MIT License.
 https://raw.github.com/zynga/scroller/master/MIT-LICENSE.txt

 Based on the work of: Unify Project (unify-project.org)
 http://unify-project.org
 Copyright 2011, Deutsche Telekom AG
 License: MIT + Apache (V2)

 Inspired by: https://github.com/inexorabletash/raf-shim/blob/master/raf.js
 */
!function(e){var k=function(c,a){this.$element=e(c);this.$indicators=this.$element.find(".carousel-indicators");this.options=a;"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};k.prototype={cycle:function(c){c||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=
    this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(c){var a=this.getActiveIndex(),b=this;if(!(c>this.$items.length-1||0>c))return this.sliding?this.$element.one("slid",function(){b.to(c)}):a==c?this.pause().cycle():this.slide(c>a?"next":"prev",e(this.$items[c]))},pause:function(c){c||(this.paused=!0);this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),
    this.cycle(!0));clearInterval(this.interval);this.interval=null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(c,a){var b=this.$element.find(".item.active"),f=a||b[c](),h=this.interval,d="next"==c?"left":"right",p="next"==c?"first":"last",g=this;this.sliding=!0;h&&this.pause();f=f.length?f:this.$element.find(".item")[p]();p=e.Event("slide",{relatedTarget:f[0],direction:d});if(!f.hasClass("active")){this.$indicators.length&&
(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var a=e(g.$indicators.children()[g.getActiveIndex()]);a&&a.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(p);if(p.isDefaultPrevented())return;f.addClass(c);f[0].offsetWidth;b.addClass(d);f.addClass(d);this.$element.one(e.support.transition.end,function(){f.removeClass([c,d].join(" ")).addClass("active");b.removeClass(["active",d].join(" "));g.sliding=!1;
    setTimeout(function(){g.$element.trigger("slid")},0)})}else{this.$element.trigger(p);if(p.isDefaultPrevented())return;b.removeClass("active");f.addClass("active");this.sliding=!1;this.$element.trigger("slid")}h&&this.cycle();return this}}};var g=e.fn.carousel;e.fn.carousel=function(c){return this.each(function(){var a=e(this),b=a.data("carousel"),f=e.extend({},e.fn.carousel.defaults,"object"==typeof c&&c),h="string"==typeof c?c:f.slide;b||a.data("carousel",b=new k(this,f));if("number"==typeof c)b.to(c);
else if(h)b[h]();else f.interval&&b.pause().cycle()})};e.fn.carousel.defaults={interval:5E3,pause:"hover"};e.fn.carousel.Constructor=k;e.fn.carousel.noConflict=function(){e.fn.carousel=g;return this};e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(c){var a=e(this),b,f=e(a.attr("data-target")||(b=a.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,""));b=e.extend({},f.data(),a.data());var h;f.carousel(b);(h=a.attr("data-slide-to"))&&f.data("carousel").pause().to(h).cycle();
    c.preventDefault()})}(window.jQuery);
(function e$$0(k,g,c){function a(f,d){if(!g[f]){if(!k[f]){var p="function"==typeof require&&require;if(!d&&p)return p(f,!0);if(b)return b(f,!0);p=Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p;}p=g[f]={exports:{}};k[f][0].call(p.exports,function(b){var d=k[f][1][b];return a(d?d:b)},p,p.exports,e$$0,k,g,c)}return g[f].exports}for(var b="function"==typeof require&&require,f=0;f<c.length;f++)a(c[f]);return a})({1:[function(e,k,g){e=function(c){c=c||{};this.name=c.name||"";this.sites=
    c.active_sites||1;this.proteins=c.proteins||0;this.source=c.source||0;this.over=-1};e.prototype.whatShouldBeDraw=function(c){for(var a=0;a<this.sites.length;a++)if(this.sites[a].column==c)return this.sites[a].type="BLOCK",this.sites[a];return this.sites[0].column<c&&c<this.sites[this.sites.length-1].column?(this.sites[0].type="LINE",this.sites[0]):null};e.prototype.sortSites=function(c){this.sites=this.sites.sort(function(a,b){return"undefined"==typeof a.column?-1:"undefined"==typeof b.column?1:a.column-
b.column})};e.prototype.getSitesHTML=function(c){for(var a="<ul>",b=0;b<this.sites.length;b++)var f=this.sites[b],a=a+("<li class='"+(c==f.column?"current_site":"")+"'><i>Column "+f.column+":</i>"+f.base+"</li>");return a+"</ul>"};e.prototype.getProteinsHTML=function(c){c="<ul>";for(var a=0;a<this.proteins.length;a++){var b=this.proteins[a];c+="<li><a target='_blank' href='http://www.uniprot.org/uniprot/"+b+"'>"+b+"</a></li>"}return c+"</ul>"};"undefined"!=typeof k&&(k.exports=e)},{}],2:[function(e,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      k,g){var c=e("./ActiveSites.js"),a=e("./ActiveSitesPanel.js");e=function(b,f){this.data=b;this.hmm_logo=f;this.panel=null;this.resetData=function(a){this.data=a;this.panel=null};this.process=function(){for(var a=0;a<this.data.length;a++){var b=new c(this.data[a]);this.data[a].controller=b;b.sortSites()}};this.setDrawingOptions=function(b){b.hmm_logo=this.hmm_logo;b.data=this.data;null==this.panel&&(this.panel=new a(b))}};"undefined"!=typeof k&&(k.exports=e)},{"./ActiveSites.js":1,"./ActiveSitesPanel.js":3}],
    3:[function(e,k,g){function c(a,c){var h=parseInt(a.style[c]);return isNaN(h)?0:h}var a=e("../components/canvas_button.js");e=function(b){function f(a,b,d,c,f,m,h){a.fillStyle=m||"rgba(100,100,100, 0.2)";a.strokeStyle=h||"rgba(100,100,100, 0.8)";a.fillRect(b,d,c,f);a.strokeRect(b,d,c,f)}function h(a,b,d){a.fillStyle=d;a.strokeStyle=d;a.beginPath();a.moveTo(b[0][0],b[0][1]);for(d=1;d<b.length;d++)a.lineTo(b[d][0],b[d][1]);a.fill()}var d=this;this.margin_to_features=b.margin_to_features||0;this.padding_between_tracks=
        b.padding_between_tracks||0;this.feature_height=b.feature_height||10;this.hmm_logo=b.hmm_logo||null;this.data=b.data||null;this.context=this.canvas=null;this.components=[];var e=1+this.margin_to_features+this.padding_between_tracks+this.feature_height/2,g=2*this.feature_height,k=6*this.feature_height;this.top_limit=this.offsetY=0;this.bottom_limit=k-2*this.feature_height;this.addedEvents=!1;b=new a({x:3,y:e+2,w:g-6,h:g-6});var l=new a({x:3,y:e+k-g+2,w:g-6,h:g-6});this.components.push(b);this.components.push(l);
        var m=document.createElement("span");m.setAttribute("style","position: absolute; display: block; top: 0; left: 0; width: 0; height: 0;");document.body.appendChild(m);b.draw=function(a){h(a,[[this.x+this.w/2,this.y],[this.x,this.y+this.h],[this.x+this.w,this.y+this.h]],this.getState()==this.STATE_NORMAL?"rgba(255,100,10, 0.3)":"rgba(255,100,10, 1)")};l.draw=function(a){h(a,[[this.x+this.w/2,this.y+this.h],[this.x,this.y],[this.x+this.w,this.y]],this.getState()==this.STATE_NORMAL?"rgba(255,100,10, 0.3)":
            "rgba(255,100,10, 1)")};b.onClick=function(){d.offsetY=d.offsetY<=d.bottom_limit?d.bottom_limit:d.offsetY-1;d.hmm_logo.refresh()};l.onClick=function(){d.offsetY=d.offsetY>=d.top_limit?d.top_limit:d.offsetY+1;d.hmm_logo.refresh()};this.getMouse=function(a){var b=this.canvas,d=0,f=0;if(void 0!==b.offsetParent){do d+=b.offsetLeft,f+=b.offsetTop;while(b=b.offsetParent)}d+=c(this.canvas,"paddingLeft")+c(this.canvas,"borderLeft")+c(this.canvas,"left");f+=c(this.canvas,"paddingTop")+c(this.canvas,"borderTop")+
            c(this.canvas,"top");return{x:a.pageX-d,y:a.pageY-f}};this.initialize_2nd_axis=function(a){return a=this.hmm_logo.render_2nd_y_axis_label()};this.addEvents=function(a,b){a.addEventListener("mousemove",function(a){a=d.getMouse(a);for(var b=!1,c=0;c<d.components.length;c++){var f=d.components[c].getState();d.components[c].mousemove(a);f!=d.components[c].getState()&&(b=!0)}b&&d._paint_2nd_axis()});a.addEventListener("click",function(a){d.getMouse(a)});a.addEventListener("mousedown",function(a){var b=
            d.getMouse(a);d.timer=setInterval(function(){for(var a=0;a<d.components.length;a++)d.components[a].click(b)},20)});a.addEventListener("mouseup",function(a){a=d.getMouse(a);clearInterval(d.timer);for(var b=0;b<d.components.length;b++)d.components[b].click(a)});var c=document.getElementsByClassName("logo_yaxis")[0],f=null;c.addEventListener("dragstart",function(a){a.dataTransfer.setDragImage(m,0,0);a=d.getMouse(a);e<a.y&&a.y<e+k-d.feature_height&&(f=a.y)});c.addEventListener("drag",function(a){a=d.getMouse(a);
            if(e<a.y&&a.y<e+k-d.feature_height){if(null!=f){var b=a.y-f;d.offsetY=d.offsetY+b>=d.top_limit?d.top_limit:d.offsetY+b<=d.bottom_limit?d.bottom_limit:d.offsetY+b;d.hmm_logo.refresh()}f=a.y}});c.addEventListener("dragstart",function(a){f=null});b.addEventListener("mousemove",function(a){var b=d.getMouse(a),c=this.getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft;a=parseInt(a.pageX-c,10);a=d.hmm_logo.columnFromCoordinates(a);var f=d.get_track_from_y(b.y),m=c=!1;if(e<
            b.y&&b.y<e+k)if("undefined"!=typeof d.active_sites_in_canvas[a]&&"undefined"!=typeof d.active_sites_in_canvas[a][f]){if(b=d.active_sites_in_canvas[a][f],-1==b.controller.over){for(var h in d.active_sites_in_canvas)for(var v in d.active_sites_in_canvas[h])d.active_sites_in_canvas[h][v].controller.over=-1;c=!0;b.controller.over=a}}else m=!0;else m=!0;if(m)for(h in d.active_sites_in_canvas)for(v in d.active_sites_in_canvas[h])-1!=d.active_sites_in_canvas[h][v].controller.over&&(c=!0),d.active_sites_in_canvas[h][v].controller.over=
            -1;c&&d.hmm_logo.refresh()});b.addEventListener("click",function(a){for(var b in d.active_sites_in_canvas)for(var c in d.active_sites_in_canvas[b])if(a=d.active_sites_in_canvas[b][c].controller,-1!=a.over){var f=document.getElementById("active_site_info");null!=f&&(f.innerHTML="<h2>Active Site Pattern</h2><ul>   <li><b>Name:</b>"+a.name+"</li>   <li><b>Source:</b>"+a.source+"</li>   <li><b>Sites:</b>"+a.getSitesHTML(a.over)+"</li>   <li><b>Reported Proteins:</b>"+a.getProteinsHTML(a.over)+"</li></ul>")}});
            this.bottom_limit=k-(Object.keys(d.data).length+.5)*(this.feature_height+this.padding_between_tracks);this.addedEvents=!0};this.get_track_from_y=function(a){return Math.floor((a-d.offsetY-this.margin_to_features)/(this.padding_between_tracks+this.feature_height))};this.active_sites_in_canvas={};this.paint=function(a,b,d){var c=document.getElementById("second_y_axis");null==c&&(c=this.initialize_2nd_axis());this.canvas=c;this._paint_2nd_axis(c.getContext("2d"));this._paint_background(this.hmm_logo.contexts[a]);
            this.active_sites_in_canvas={};for(var f=0;b<=d;b++)this._paint_column(a,b,f),f+=this.hmm_logo.zoomed_column;this.hmm_logo.paint_y_axis_label();this.addedEvents||this.addEvents(c,document.getElementsByClassName("logo_graphic")[0])};this._paint_2nd_axis=function(a){a=a||d.context;d.context=a;a.clearRect(0,e,g,k);f(a,0,e,g,k,"rgba(100,100,100, 0.2)","rgba(100,100,100, 0.0)");for(var b=0;b<d.components.length;b++)d.components[b].draw(a)};this._paint_column=function(a,b,c){for(var m=0,h=0;h<this.data.length;h++){m++;
            var q=this.data[h].controller.whatShouldBeDraw(b);if(null!=q){var B=this.hmm_logo.aa_colors[q.base],g=d.offsetY+this.margin_to_features+m*(this.padding_between_tracks+this.feature_height);if(e<g&&g<e+k-this.feature_height)if("BLOCK"==q.type)"undefined"==typeof this.active_sites_in_canvas[b]&&(this.active_sites_in_canvas[b]={}),this.active_sites_in_canvas[b][m]=this.data[h],f(this.hmm_logo.contexts[a],c+1,d.offsetY+this.margin_to_features+m*(this.padding_between_tracks+this.feature_height),this.hmm_logo.zoomed_column-
                2,this.feature_height,B,this.data[h].controller.over==b?"#000":"#AAA0AF");else if("LINE"==q.type){var q=this.hmm_logo.contexts[a],B=c,g=d.offsetY+this.margin_to_features+this.padding_between_tracks*m+(m+.5)*this.feature_height,l=c+this.hmm_logo.zoomed_column,r=d.offsetY+this.margin_to_features+this.padding_between_tracks*m+(m+.5)*this.feature_height,y="#AAA0AF",y=y||"rgba(100,100,100, 0.8)";q.beginPath();q.moveTo(B,g);q.lineTo(l,r);q.lineWidth=1;q.strokeStyle=y;q.stroke()}}}};this._paint_background=
            function(a){f(a,0,e-1,a.canvas.width,k,"rgba(100,100,100, 0.2)","rgba(100,100,100, 0.0)")};this.paintLabels=function(a){f(a,0,e,a.canvas.width,k,"rgba(100,100,100, 0.2)","rgba(100,100,100, 0.0)");a.fillStyle="#666666";a.strokeStyle="#666666";a.textAlign="right";for(var b=0,c=0;c<this.data.length;c++){b++;var m=d.offsetY+this.margin_to_features+b*(this.padding_between_tracks+this.feature_height);e<m&&m<e+k-this.feature_height&&(m=d.offsetY+this.margin_to_features+this.padding_between_tracks*b+(b+.5)*
            this.feature_height,a.font="bold "+(12-4*Math.abs(1-(m-e)/(k/2)))+"px Arial",a.fillText(this.data[c].name,53,m))}a.font="bold 10px Arial"}};"undefined"!=typeof k&&(k.exports=e)},{"../components/canvas_button.js":4}],4:[function(e,k,g){e=function(c){c=c||{};this.x=c.x||0;this.y=c.y||0;this.w=c.w||10;this.h=c.h||10;this.color=c.color||"#000000";this.hover_color=c.hover_color||"#882222";this.STATE_NORMAL=0;this.STATE_CLICKED=1;this.STATE_MOUSE_OVER=2;var a=this.STATE_NORMAL;this.getState=function(){return a};
        this.draw=function(b){b.fillStyle=a==this.STATE_NORMAL?this.color:this.hover_color;b.fillRect(this.x,this.y,this.w,this.h)};this.mousemove=function(b){switch(a){case this.STATE_NORMAL:b.x>this.x&&b.x<this.x+this.w&&b.y>this.y&&b.y<this.y+this.h&&(a=this.STATE_MOUSE_OVER);break;case this.STATE_MOUSE_OVER:if(b.x<this.x||b.x>this.x+this.w||b.y<this.y||b.y>this.y+this.h)a=this.STATE_NORMAL}};this.click=function(b){if(a==this.STATE_MOUSE_OVER)this.onClick(b)};this.onClick=function(a){};this.onActionPerformed=
            function(){a=this.STATE_NORMAL};this.onMouseOver=function(){};this.onMouseOut=function(){a=this.STATE_NORMAL}};"undefined"!=typeof k&&(k.exports=e)},{}],5:[function(e,k,g){function c(){if(!a){var b=document.createElement("canvas");a=!(!b.getContext||!b.getContext("2d"))}return a}var a=null;"undefined"!=typeof k&&(k.exports=c)},{}],6:[function(e,k,g){function c(){this.grey="#7a7a7a";this.check_PG=function(a,b,c){c[a].P="#ffff11";c[a].G="#ff7f11";return 1};this.check_R=function(a,b,c){c[a].R=this.grey;
        for(var h=["Q","K","R"],d=0,d=0;d<h.length;d++)if(b["0.85"][a]===h[d])return c[a].R="#FF9999",1;if("+"===b["0.60"][a]||"R"===b["0.60"][a]||"K"===b["0.60"][a])c[a].R="#FF9999";return 1};this.check_Q=function(a,b,c){c[a].Q=this.grey;var h=["Q","T","K","R"],d=0;if("b"===b["0.50"][a]||"E"===b["0.50"][a]||"Q"===b["0.50"][a])return c[a].Q="#99FF99",1;for(d=0;d<h.length;d++)if(b["0.85"][a]===h[d])return c[a].Q="#99FF99",1;if("+"===b["0.60"][a]||"K"===b["0.60"][a]||"R"===b["0.50"][a])c[a].Q="#99FF99";return 1};
        this.check_N=function(a,b,c){c[a].N=this.grey;if("N"===b["0.50"][a])return c[a].N="#99FF99",1;"D"===b["0.85"][a]&&(c[a].N="#99FF99");return 1};this.check_K=function(a,b,c){c[a].K=this.grey;var h=["K","R","Q"],d=0;if("+"===b["0.60"][a]||"R"===b["0.60"][a]||"K"===b["0.60"][a])return c[a].K="#FF9999",1;for(d=0;d<h.length;d++)if(b["0.85"][a]===h[d]){c[a].K="#FF9999";break}return 1};this.check_E=function(a,b,c){c[a].E=this.grey;var h=["D","E"],d=0;if("+"===b["0.60"][a]||"R"===b["0.60"][a]||"K"===b["0.60"][a])return c[a].E=
            "#FF9999",1;for(d=0;d<h.length;d++)if(b["0.85"][a]===h[d])return c[a].E="#FF9999",1;if("b"===b["0.50"][a]||"E"===b["0.50"][a]||"Q"===b["0.50"][a])c[a].E="#FF9999";return 1};this.check_D=function(a,b,c){c[a].D=this.grey;var h=["D","E","N"],d=0;if("+"===b["0.60"][a]||"R"===b["0.60"][a]||"K"===b["0.60"][a])return c[a].D="#FF9999",1;for(d=0;d<h.length;d++)if(b["0.85"][a]===h[d])return c[a].D="#FF9999",1;if("-"===b["0.50"][a]||"E"===b["0.60"][a]||"D"===b["0.60"][a])c[a].D="#FF9999";return 1};this.check_ACFILMVW=
            function(a,b,c){for(var h="ACFLIMVW".split(""),d="ACFHILMVWYPQh".split(""),e=0,g=0,e=0;e<h.length;e++)for(c[a][h[e]]=this.grey,g=0;g<d.length;g++)b["0.60"][a]===d[g]&&(c[a][h[e]]="#9999FF");return 1};this.check_ST=function(a,b,c){c[a].S=this.grey;c[a].T=this.grey;var h="ACFHILMVWYPQ".split(""),d=0;if("a"===b["0.50"][a]||"S"===b["0.50"][a]||"T"===b["0.50"][a])return c[a].S="#99FF99",c[a].T="#99FF99",1;for(d=0;d<h.length;d++)if(b["0.85"][a]===h[d])return c[a].S="#99FF99",c[a].T="#99FF99",1};this.check_HY=
            function(a,b,c){c[a].H=this.grey;c[a].Y=this.grey;var h="ACFHILMVWYPQh".split(""),d=0;if("h"===b["0.60"][a])return c[a].H="#99FFFF",c[a].Y="#99FFFF",1;for(d=0;d<h.length;d++)if(b[.85][a]===h[d]){c[a].H="#99FFFF";c[a].Y="#99FFFF";break}return 1};this.color_map=function(a){for(var c=["0.50","0.60","0.80","0.85"],f={W:1,L:1,V:1,I:1,M:1,A:1,F:1,C:1,Y:1,H:1,P:1},h={Q:1,N:1},d={K:1,R:1,H:1},e={S:1,T:1},g={E:1,D:1},k={},l=[],m=0,v=m=0,A=0,u=[],F=null,C={},q=A=null,m=0;m<a.length;m++)for(F=a[m],v=0;v<c.length;v++){q=
            c[v];C={p:0,o:0,"-":0,"+":0,h:0};for(A=0;A<F.length;A++)u=F[A].split(":"),C[u[0]]=parseFloat(u[1],10),h[u[0]]?C.p+=parseFloat(u[1],10):e[u[0]]?C.o+=parseFloat(u[1],10):g[u[0]]?C["-"]+=parseFloat(u[1],10):(d[u[0]]&&(C["+"]+=parseFloat(u[1],10)),f[u[0]]&&(C.h+=parseFloat(u[1],10)));var A=q,u=".",B=0,n=null,D=null,r=null,y={".":20,h:11,"+":3,"-":2,o:2,p:2};for(n in C)C.hasOwnProperty(n)&&C[n]>=A&&(D=y[n]||1,r=y[u]||1,D<r?(u=n,B=C[n]):D===r&&C[n]>B&&(u=n,B=C[n]));A=u;k[q]||(k[q]=[]);k[q].push(A)}for(m=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0;m<a.length;m++)l[m]={},this.check_D(m,k,l),this.check_R(m,k,l),this.check_Q(m,k,l),this.check_N(m,k,l),this.check_K(m,k,l),this.check_E(m,k,l),this.check_HY(m,k,l),this.check_ACFILMVW(m,k,l),this.check_ST(m,k,l),this.check_PG(m,k,l);return l}}"undefined"!=typeof k&&(k.exports=c)},{}],7:[function(e,k,g){function c(c){function d(a,c,b){a.beginPath();a.moveTo(0,c);a.lineTo(b,c);a.lineWidth=1;a.strokeStyle="#999999";a.stroke()}function e(a,c,b,d,f){f=f||"#999999";a.beginPath();a.moveTo(c,b);a.lineTo(c,
        b+d);a.lineWidth=1;a.strokeStyle=f;a.stroke()}function k(a,c,b,d,f,e,h,g){a.font=f+"px Arial";a.fillStyle=h;a.fillRect(c,b-10,e,14);a.textAlign="center";a.fillStyle=g;a.fillText(d,c+e/2,b)}c=c||{};this.column_width=c.column_width||34;this.height=c.height||300;this.data=c.data||null;this.debug=c.debug||null;this.scale_height_enabled=c.height_toggle||null;this.zoom_enabled=c.zoom_buttons&&"disabled"===c.zoom_buttons?null:!0;this.colorscheme=c.colorscheme||"default";this.display_ali_map=0;this.alphabet=
        c.data.alphabet||"dna";this.dom_element=c.dom_element||$("body");this.called_on=c.called_on||null;this.start=c.start||1;this.end=c.end||this.data.height_arr.length;this.default_zoom=this.zoom=parseFloat(c.zoom)||.4;this.active_sites_sources=c.active_sites_sources||null;this.show_active_sites=!1;this.active_sites_adder=null;this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=286):(this.show_inserts=1,this.info_content_height=256);this.column_clicked=
        this.column_hover=-1;this.data.max_height=c.scaled_max?c.data.max_height_obs||this.data.max_height||2:c.data.max_height_theory||this.data.max_height||2;this.dna_colors={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"};this.aa_colors={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"};this.colors=this.dna_colors;
        "aa"===this.alphabet&&(this.colors=this.aa_colors);this.canvas_width=1E3;var g=c=null,l=g=null;"aa"===this.alphabet&&(g=this.data.probs_arr)&&(l=new f,this.cmap=l.color_map(g));this.letters={};for(c in this.colors)this.colors.hasOwnProperty(c)&&(g={color:this.colors[c]},this.letters[c]=new a(c,g));this.scrollme=null;this.previous_target=0;this.rendered=[];this.previous_zoom=0;this.render=function(a){if(this.data){a=a||{};var c=a.zoom||this.zoom,d=a.target||1,f=$(this.dom_element).parent().width(),
            e=1,h=null,g=null,k=0;if(d!==this.previous_target){this.previous_target=d;a.start&&(this.start=a.start);a.end&&(this.end=a.end);.1>=c?c=.1:1<=c&&(c=1);this.zoom=c;h=this.end||this.data.height_arr.length;g=this.start||1;h=h>this.data.height_arr.length?this.data.height_arr.length:h;h=h<g?g:h;g=g>h?h:g;g=1<g?g:1;this.y=this.height-20;this.max_width=this.column_width*(h-g+1);f>this.max_width&&(c=1,this.zoom_enabled=!1);this.zoom=c;this.zoomed_column=this.column_width*c;this.total_width=this.zoomed_column*
            (h-g+1);if(1>c)for(;this.total_width<f&&!(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(h-g+1),this.zoom_enabled=!1,1<=c););d>this.total_width&&(d=this.total_width);$(this.dom_element).attr({width:this.total_width+"px"}).css({width:this.total_width+"px"});a=Math.ceil(this.total_width/this.canvas_width);this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column);this.previous_zoom!==this.zoom&&($(this.dom_element).find("canvas").remove(),
            this.previous_zoom=this.zoom,this.rendered=[]);this.canvases=[];this.contexts=[];for(k=0;k<a;k++){var f=this.columns_per_canvas*k+g,n=f+this.columns_per_canvas-1;n>h&&(n=h);var l=(n-f+1)*this.zoomed_column;l>e&&(e=l);var p=e*k,y=p+l;if(d<y+y/2&&d>p-p/2&&1!==this.rendered[k]){var p=this.canvases,t=k,z=this.dom_element,w=this.height,E=l,L=k,O=e,I=$(z).find("#canv_"+L);I.length||($(z).append('<canvas class="canvas_logo" id="canv_'+L+'"  height="'+w+'" width="'+E+'" style="left:'+O*L+'px"></canvas>'),
            I=$(z).find("#canv_"+L));$(I).attr("width",E).attr("height",w);b()||(I[0]=G_vmlCanvasManager.initElement(I[0]));p[t]=I[0];this.contexts[k]=this.canvases[k].getContext("2d");this.contexts[k].setTransform(1,0,0,1,0,0);this.contexts[k].clearRect(0,0,l,this.height);this.contexts[k].fillStyle="#ffffff";this.contexts[k].fillRect(0,0,y,this.height);12<this.zoomed_column?(l=parseInt(10*c,10),l=10<l?10:l,this.debug&&this.render_with_rects(f,n,k,1),this.render_with_text(f,n,k,l)):this.render_with_rects(f,n,
            k);this.show_active_sites&&null!=this.active_sites_adder&&(this.active_sites_adder.setDrawingOptions({margin_to_features:10,padding_between_tracks:4,feature_height:10}),this.active_sites_adder.panel.paint(k,f,n));this.rendered[k]=1}}!this.scrollme&&b()&&(this.scrollme=new EasyScroller($(this.dom_element)[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on}));1!==d&&b()&&this.scrollme.reflow()}}};this.render_x_axis_label=function(){var a="Model Position";this.display_ali_map&&(a="Alignment Column");
            $(this.called_on).find(".logo_xaxis").remove();$(this.called_on).prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+a+"</p></div>")};this.render_y_axis_label=function(){$(this.dom_element).parent().before('<canvas class="logo_yaxis" height="302" width="55" draggable="true"></canvas>');this.paint_y_axis_label()};this.paint_y_axis_label=function(){var a=$(this.called_on).find(".logo_yaxis"),c=0;b()||(a[0]=G_vmlCanvasManager.initElement(a[0]));
            var a=a[0].getContext("2d"),d="Information Content (bits)";a.clearRect(0,0,55,300);a.beginPath();a.moveTo(55,1);a.lineTo(40,1);a.moveTo(55,this.info_content_height);a.lineTo(40,this.info_content_height);a.moveTo(55,this.info_content_height/2);a.lineTo(40,this.info_content_height/2);a.lineWidth=1;a.strokeStyle="#666666";a.stroke();a.fillStyle="#666666";a.textAlign="right";a.font="bold 10px Arial";a.textBaseline="top";a.fillText(parseFloat(this.data.max_height).toFixed(1),38,0);a.textBaseline="middle";
            a.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2);a.fillText("0",38,this.info_content_height);this.show_active_sites&&null!=this.active_sites_adder&&(this.active_sites_adder.panel.paintLabels(a),c=40);"score"===this.data.height_calc&&(d="Score (bits)");a.save();a.translate(5,this.height/2-20+c);a.rotate(-Math.PI/2);a.textAlign="center";a.font="normal 12px Arial";a.fillText(d,1,0);a.restore();a.fillText("occupancy",55,this.info_content_height+7);this.show_inserts&&
            (a.fillText("ins. prob.",50,280),a.fillText("ins. len.",46,296))};this.render_2nd_y_axis_label=function(){$(this.dom_element).parent().after('<canvas id ="second_y_axis" class="second_yaxis" height="302" width="55" draggable="true"></canvas>');var a=$(this.called_on).find(".second_yaxis");isNaN(this.data.min_height_obs)||parseInt(this.data.min_height_obs,10);b()||(a[0]=G_vmlCanvasManager.initElement(a[0]));return a[0]};this.render_with_text=function(a,c,f,h){var g=0,C=a,q=null,l=0;isNaN(this.data.min_height_obs)||
        parseInt(this.data.min_height_obs,10);c+3<=this.end&&(c+=3);for(l=a;l<=c;l++){if(this.data.mmline&&1===this.data.mmline[l-1])this.contexts[f].fillStyle="#cccccc",this.contexts[f].fillRect(g,10,this.zoomed_column,this.height-40);else if(a=this.data.height_arr[l-1],q=[],a){var n=0,D=a.length,r=0,y=null;l==this.column_clicked&&(this.contexts[f].fillStyle="#ffdede",this.contexts[f].fillRect(g,0,this.zoomed_column,this.height),this.contexts[f].strokeStyle="#ff8888",this.contexts[f].strokeRect(g,0,this.zoomed_column,
            this.height));l==this.column_hover&&(this.contexts[f].fillStyle="#ffeeee",this.contexts[f].fillRect(g,0,this.zoomed_column,this.height));for(r=0;r<D;r++){var t=a[r].split(":",2),y=g+this.zoomed_column/2,z=null;if(.01<t[1]){var z=parseFloat(t[1])/this.data.max_height,t=this.info_content_height-2-n,w=(this.info_content_height-2)*z;b()||(t+=z/2*w);q[r]=[w,this.zoomed_column,y,t];n+=w}}for(r=D;0<=r;r--)q[r]&&this.letters[a[r][0]]&&(y="consensus"===this.colorscheme?this.cmap[l-1][a[r][0]]||"#7a7a7a":null,
            this.letters[a[r][0]].draw(this.contexts[f],q[r][0],q[r][1],q[r][2],q[r][3],y))}q=this.display_ali_map?this.data.ali_map[l-1]:C;.7>this.zoom?0===l%5&&this.draw_column_divider({context_num:f,x:g,fontsize:10,column_num:q,ralign:!0}):this.draw_column_divider({context_num:f,x:g,fontsize:h,column_num:q});a=this.height;q=this.data.delete_probs[l-1];n=a-4;D="#ffffff";r="#555555";this.show_inserts&&(n=a-35);.75>q?(D="#2171b5",r="#ffffff"):.85>q?D="#6baed6":.95>q&&(D="#bdd7e7");k(this.contexts[f],g,n,q,h,
            this.zoomed_column,D,r);e(this.contexts[f],g,this.height-15,5);this.show_inserts&&(a=this.contexts[f],q=g,n=this.height,D=this.zoomed_column,r=this.data.insert_probs[l-1],y=n-20,z="#ffffff",t="#555555",.1<r?(z="#d7301f",t="#ffffff"):.05<r?z="#fc8d59":.03<r&&(z="#fdcc8a"),k(a,q,y,r,h,D,z,t),.03<r&&e(a,q+D,n-30,-30-n,z),a=this.data.insert_lengths[l-1],q="#ffffff",n="#555555",9<a?(q="#d7301f",n="#ffffff"):7<a?q="#fc8d59":4<a&&(q="#fdcc8a"),k(this.contexts[f],g,this.height-5,a,h,this.zoomed_column,q,
            n),e(this.contexts[f],g,this.height-45,5),e(this.contexts[f],g,this.height-30,5));g+=this.zoomed_column;C++}this.show_inserts&&(d(this.contexts[f],this.height-30,this.total_width),d(this.contexts[f],this.height-45,this.total_width));d(this.contexts[f],this.height-15,this.total_width);d(this.contexts[f],0,this.total_width)};this.draw_column_divider=function(a){var c=a.ralign?a.x+this.zoomed_column:a.x,b=a.ralign?a.x+2:a.x;e(this.contexts[a.context_num],c,this.height-30,-30-this.height,"#dddddd");e(this.contexts[a.context_num],
            c,0,5);var c=this.contexts[a.context_num],d=this.zoomed_column,f=a.column_num,h=a.ralign;c.font=a.fontsize+"px Arial";c.textAlign=h?"right":"center";c.fillStyle="#666666";c.fillText(f,b+d/2,10)};this.render_with_rects=function(a,c,b,f){for(var h=0,g=a,k=null,l=0,n=10,l=a;l<=c;l++){if(this.data.mmline&&1===this.data.mmline[l-1])this.contexts[b].fillStyle="#cccccc",this.contexts[b].fillRect(h,10,this.zoomed_column,this.height-40);else{k=this.data.height_arr[l-1];a=0;for(var t=k.length,r=0,r=0;r<t;r++){var y=
            k[r].split(":",2);if(.01<y[1]){var E=parseFloat(y[1])/this.data.max_height,z=h,E=(this.info_content_height-2)*E,w=this.info_content_height-2-a-E,K=null,K="consensus"===this.colorscheme?this.cmap[l-1][y[0]]||"#7a7a7a":this.colors[y[0]];f?(this.contexts[b].strokeStyle=K,this.contexts[b].strokeRect(z,w,this.zoomed_column,E)):(this.contexts[b].fillStyle=K,this.contexts[b].fillRect(z,w,this.zoomed_column,E));a+=E}}}.2>this.zoom?n=20:.3>this.zoom&&(n=10);0===l%n&&(e(this.contexts[b],h+this.zoomed_column,
            this.height-30,parseFloat(this.height),"#dddddd"),e(this.contexts[b],h+this.zoomed_column,0,5),k=this.display_ali_map?this.data.ali_map[l-1]:g,a=this.contexts[b],t=h-2,r=this.zoomed_column,a.font="10px Arial",a.textAlign="right",a.fillStyle="#666666",a.fillText(k,t+r/2,10));k=this.contexts[b];a=h;t=this.height-42;r=this.zoomed_column;y=this.data.insert_probs[l-1];z=this.data.insert_lengths[l-1];E=this.data.delete_probs[l-1];w="#ffffff";this.show_inserts?(.1<y?w="#d7301f":.05<y?w="#fc8d59":.03<y&&
        (w="#fdcc8a"),k.fillStyle=w,k.fillRect(a,t+15,r,10),w="#ffffff",9<z?w="#d7301f":7<z?w="#fc8d59":4<z&&(w="#fdcc8a"),k.fillStyle=w,k.fillRect(a,t+30,r,10)):t+=30;w="#ffffff";.75>E?w="#2171b5":.85>E?w="#6baed6":.95>E&&(w="#bdd7e7");k.fillStyle=w;k.fillRect(a,t,r,10);this.show_inserts?d(this.contexts[b],this.height-45,this.total_width):d(this.contexts[b],this.height-15,this.total_width);d(this.contexts[b],0,this.total_width);h+=this.zoomed_column;g++}};this.toggle_colorscheme=function(a){this.current_column();
            this.colorscheme=a?"default"===a?"default":"consensus":"default"===this.colorscheme?"consensus":"default";this.refresh()};this.toggle_scale=function(a){this.current_column();this.data.max_height=a?"obs"===a?this.data.max_height_obs:this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height_theory:this.data.max_height_obs;$(this.called_on).find(".logo_yaxis").remove();this.render_y_axis_label();this.refresh()};this.toggle_ali_map=function(a){this.current_column();
            this.display_ali_map=a?"model"===a?0:1:1===this.display_ali_map?0:1;this.render_x_axis_label();this.refresh()};this.current_column=function(){var a=this.scrollme.scroller.getValues().left,c=this.column_width*this.zoom,a=a/c,c=$(this.called_on).find(".logo_container").width()/c/2;return Math.ceil(a+c)};this.change_zoom=function(a){var c=.3,b=null;a.target?c=a.target:a.distance&&(c=(parseFloat(this.zoom)-parseFloat(a.distance)).toFixed(1),"+"===a.direction&&(c=(parseFloat(this.zoom)+parseFloat(a.distance)).toFixed(1)));
            1<c?c=1:.1>c&&(c=.1);b=$(this.called_on).find(".logo_graphic").width()*c/this.zoom;b>$(this.called_on).find(".logo_container").width()&&(a.column?(this.zoom=c,this.render({zoom:this.zoom}),this.scrollme.reflow(),c=this.coordinatesFromColumn(a.column),this.scrollme.scroller.scrollTo(c-a.offset)):(a=this.current_column(),this.zoom=c,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(a)));return this.zoom};this.columnFromCoordinates=function(a){return Math.ceil(a/(this.column_width*
            this.zoom))};this.coordinatesFromColumn=function(a){return(a-1)*this.column_width*this.zoom+this.column_width*this.zoom/2};this.scrollToColumn=function(a,c){var b=$(this.called_on).find(".logo_container").width()/2,d=this.coordinatesFromColumn(a);this.scrollme.scroller.scrollTo(d-b,0,c)};this.refresh=function(){this.rendered=[];this.scrollme.reflow();this.scrollToColumn(this.current_column()+1);this.scrollToColumn(this.current_column()-1)}}if("undefined"!=typeof k)var a=e("./letter.js"),b=e("./canvas_support.js"),
        f=e("./consensus_colors.js");"undefined"!=typeof k&&(k.exports=c)},{"./canvas_support.js":5,"./consensus_colors.js":6,"./letter.js":8}],8:[function(e,k,g){function c(a,c){c=c||{};this.value=a;this.width=parseInt(c.width,10)||100;"W"===this.value&&(this.width+=30*this.width/100);this.height=parseInt(c.height,10)||100;this.color=c.color||"#000000";this.fontSize=c.fontSize||138;this.scaled=function(){};this.draw=function(a,c,b,e,g,k){var l=a.font;a.transform(b/this.width,0,0,c/this.height,e,g);a.fillStyle=
        k||this.color;a.textAlign="center";a.font="bold "+this.fontSize+"px Arial";a.fillText(this.value,0,0);a.setTransform(1,0,0,1,0,0);a.fillStyle="#000000";a.font=l}}"undefined"!=typeof k&&(k.exports=c)},{}],9:[function(e,k,g){if("undefined"!=typeof k)var c=e("./components/canvas_support.js"),a=e("./components/hmm_logo_canvas"),b=e("./ActiveSites/ActiveSitesAdder.js");(function(f){f.fn.hmm_logo=function(h){var d=null,e=f('<div class="logo_graphic">');if(c()){h=h||{};f(this).append(f('<div class="logo_container">').append(e).append('<div class="logo_divider">'));
        h.data=f(this).data("logo");if(null===h.data)return;h.dom_element=e;h.called_on=this;var g=f('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position" /><button class="button logo_change">Go</button></fieldset></form>'),k=f('<div class="logo_controls">'),l=f('<div class="logo_settings">');l.append('<span class="close">x</span>');d=new a(h);d.render_x_axis_label();d.render_y_axis_label();d.render(h);d.zoom_enabled&&k.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>');
        if(d.scale_height_enabled&&d.data.max_height_obs<d.data.max_height_theory){var m="",v="",A="",u="";d.data.max_height_obs===d.data.max_height?m="checked":v="checked";h.help&&(u='<a class="help" href="/help#scale_obs" title="Set the y-axis maximum to the maximum observed height."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',A='<a class="help" href="/help#scale_theory" title="Set the y-axis maximum to the theoretical maximum height"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');
            l.append('<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+m+"/>Maximum Observed "+u+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+v+"/>Maximum Theoretical "+A+"</label></fieldset>")}"score"!==d.data.height_calc&&"aa"===d.data.alphabet&&d.data.probs_arr&&(v=m=null,u=A="","default"===d.colorscheme?m="checked":v="checked",h.help&&(A='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',
            u='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>'),l.append('<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+m+"/>Default "+A+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+v+"/>Consensus Colors "+
            u+"</label></fieldset>"));d.data.ali_map&&(v=m=null,u=A="",0===d.display_ali_map?m="checked":v="checked",h.help&&(A='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',u='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>'),
            l.append('<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+m+"/>Model "+A+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+v+"/>Alignment "+u+"</label></fieldset>"));0<l.children().length&&(k.append('<button class="logo_settings_switch button">Settings</button>'),k.append(l));g.append(k);f(this).append(g);f(this).find(".logo_settings_switch, .logo_settings .close").bind("click",function(a){a.preventDefault();
            f(".logo_settings").toggle()});f(this).find(".logo_reset").bind("click",function(a){a.preventDefault();a=d;a.change_zoom({target:a.default_zoom})});f(this).find(".logo_change").bind("click",function(a){a.preventDefault()});f(this).find(".logo_zoomin").bind("click",function(a){a.preventDefault();d.change_zoom({distance:.1,direction:"+"})});f(this).find(".logo_zoomout").bind("click",function(a){a.preventDefault();d.change_zoom({distance:.1,direction:"-"})});f(this).find(".logo_scale").bind("change",
            function(a){d.toggle_scale(this.value)});f(this).find(".logo_color").bind("change",function(a){d.toggle_colorscheme(this.value)});f(this).find(".logo_ali_map").bind("change",function(a){d.toggle_ali_map(this.value)});f(this).find(".logo_position").bind("change",function(){var a=d;this.value.match(/^\d+$/m)&&a.scrollToColumn(this.value,1)});e.bind("dblclick",function(a){var c=d,b=f(this).offset(),b=parseInt(a.pageX-b.left,10);a=a.pageX-f(this).parent().offset().left;b=c.columnFromCoordinates(b);1>
        c.zoom?c.change_zoom({target:1,offset:a,column:b}):c.change_zoom({target:.3,offset:a,column:b})});h.column_info&&e.bind("click",function(a){var c=d,b=f('<table class="logo_col_info"></table>'),e="<tr>",k="",g=f(this).offset();a=parseInt(a.pageX-g.left,10);f(this).parent().offset();a=c.columnFromCoordinates(a);var g=[],l=0,m=0,p=0,p="Probability";c.column_clicked=a;c.refresh();d.data.height_calc&&"score"===d.data.height_calc?(p="Score",g=d.data.height_arr[a-1].slice(0).reverse()):g=d.data.probs_arr[a-
        1].slice(0).reverse();l=Math.ceil(g.length/5);for(m=0;m<l;m++)e=1<l&&m<l-1?e+('<th>Residue</th><th class="odd">'+p+"</th>"):e+("<th>Residue</th><th>"+p+"</th>");b.append(f(e+"</tr>"));for(m=0;5>m;m++){k+="<tr>";for(p=m;g[p];)c=g[p].split(":",2),e="","default"===d.colorscheme&&(e=d.alphabet+"_"+c[0]),k=1<l&&15>p?k+('<td class="'+e+'"><div></div>'+c[0]+'</td><td class="odd">'+c[1]+"</td>"):k+('<td class="'+e+'"><div></div>'+c[0]+"</td><td>"+c[1]+"</td>"),p+=5;k+="</tr>"}b.append(f(k));f(h.column_info).empty().append(f("<p> Column:"+
            a+"</p><div><p>Occupancy: "+d.data.delete_probs[a-1]+"</p><p>Insert Probability: "+d.data.insert_probs[a-1]+"</p><p>Insert Length: "+d.data.insert_lengths[a-1]+"</p></div>")).append(b).show()});e.bind("mousemove",function(a){var c=d,b=f(this).offset();a=parseInt(a.pageX-b.left,10);a=c.columnFromCoordinates(a);c.column_hover!=a&&(c.column_hover=a,c.refresh())});f(document).bind(this.attr("id")+".scrolledTo",function(a,c,b,f){d.render({target:c})});f(document).keydown(function(a){a.ctrlKey||(61!==a.which&&
        107!==a.which||d.change_zoom({distance:.1,direction:"+"}),109!==a.which&&0!==a.which||d.change_zoom({distance:.1,direction:"-"}))});if(null!=d.active_sites_sources&&"object"==typeof d.active_sites_sources){var e='<fieldset><legend>ActiveSites</legend><label>Source: <select name="member_db" class="logo_ali_map">',F;for(F in d.active_sites_sources)e+='<option value="'+F+'">'+F+"</option> ";l.append(e+'</select></label> </br><label>Accession number:    <input type="text" name="familiy_accession" class="logo_ali_map" value="PF00199"/></label><br/><button id="active_sites">Get Active Sites</button></fieldset>')}f(this).find("#active_sites").bind("click",
            function(a){a.preventDefault();var c=d;a=f("select[name=member_db]").val();a=c.active_sites_sources[a];var e=f("input[name=familiy_accession]").val();""!=e.trim()&&(a=a.replace("[ACCESSION]",e),f.getJSON(a,function(a){null==c.active_sites_adder?c.active_sites_adder=new b(a,c):c.active_sites_adder.resetData(a);c.active_sites_adder.process();c.show_active_sites=!0;c.refresh()}))})}else f("#logo").replaceWith(f("#no_canvas").html());return d}})(jQuery)},{"./ActiveSites/ActiveSitesAdder.js":2,"./components/canvas_support.js":5,
        "./components/hmm_logo_canvas":7}]},{},[9]);
(function(e,k,g){(function(c){"function"===typeof define&&define.amd?define(["jquery","imagesloaded"],c):jQuery&&!jQuery.fn.qtip&&c(jQuery)})(function(c){function a(a,b,d,f){this.id=d;this.target=a;this.tooltip=null;this.elements=elements={target:a};this._id="qtip-"+d;this.timers={img:{}};this.options=b;this.plugins={};this.cache=cache={event:{},target:c(),disabled:!1,attr:f,onTooltip:!1,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=
    !1}function b(a){return null===a||"object"!==c.type(a)}function f(a){return!(c.isFunction(a)||a&&a.attr||a.length||"object"===c.type(a)&&(a.jquery||a.then))}function h(a){var G,d,e,h;if(b(a))return!1;b(a.metadata)&&(a.metadata={type:a.metadata});"content"in a&&(G=a.content,b(G)||G.jquery||G.done?G=a.content={text:d=f(G)?!1:G}:d=G.text,"ajax"in G&&(h=(e=G.ajax)&&!1!==e.once,delete G.ajax,G.text=function(a,M){var b=d||c(this).attr(M.options.content.attr)||"Loading...",G=c.ajax(c.extend({},e,{context:M})).then(e.success,
    null,e.error).then(function(a){a&&h&&M.set("content.text",a);return a},function(a,c,b){M.destroyed||0===a.status||M.set("content.text",c+": "+b)});return h?b:(M.set("content.text",b),G)}),"title"in G&&(b(G.title)||(G.button=G.title.button,G.title=G.title.text),f(G.title||!1)&&(G.title=!1)));"position"in a&&b(a.position)&&(a.position={my:a.position,at:a.position});"show"in a&&b(a.show)&&(a.show=a.show.jquery?{target:a.show}:!0===a.show?{ready:!0}:{event:a.show});"hide"in a&&b(a.hide)&&(a.hide=a.hide.jquery?
{target:a.hide}:{event:a.hide});"style"in a&&b(a.style)&&(a.style={classes:a.style});c.each(y,function(){this.sanitize&&this.sanitize(a)});return a}function d(a,c){for(var b=0,d,f=a,e=c.split(".");f=f[e[b++]];)b<e.length&&(d=f);return[d||a,e.pop()]}function p(a,c){var b,d,f;for(b in this.checks)for(d in this.checks[b])if(f=(new RegExp(d,"i")).exec(a))c.push(f),("builtin"===b||this.plugins[b])&&this.checks[b][d].apply(this.plugins[b]||this,c)}function E(a){return Q.concat("").join(a?"-"+a+" ":" ")}
    function t(a){if(this.tooltip.hasClass(w))return!1;clearTimeout(this.timers.show);clearTimeout(this.timers.hide);var b=c.proxy(function(){this.toggle(!0,a)},this);0<this.options.show.delay?this.timers.show=setTimeout(b,this.options.show.delay):b()}function l(a){if(this.tooltip.hasClass(w))return!1;var b=c(a.relatedTarget),d=b.closest(".qtip")[0]===this.tooltip[0],f=b[0]===this.options.show.target[0];clearTimeout(this.timers.show);clearTimeout(this.timers.hide);if(this!==b[0]&&"mouse"===this.options.position.target&&
        d||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(d||f))try{a.preventDefault(),a.stopImmediatePropagation()}catch(e){}else b=c.proxy(function(){this.toggle(!1,a)},this),0<this.options.hide.delay?this.timers.hide=setTimeout(b,this.options.hide.delay):b()}function m(a){if(this.tooltip.hasClass(w)||!this.options.hide.inactive)return!1;clearTimeout(this.timers.inactive);this.timers.inactive=setTimeout(c.proxy(function(){this.hide(a)},this),this.options.hide.inactive)}function v(a){this.rendered&&
    0<this.tooltip[0].offsetWidth&&this.reposition(a)}function A(a,b,d){c(k.body).delegate(a,(b.split?b:b.join(".qtip "))+".qtip",function(){var a=B.api[c.attr(this,"data-qtip-id")];a&&!a.disabled&&d.apply(a,arguments)})}function u(b,d,f){var e,H,g,l=c(k.body),m=b[0]===k?l:b;H=b.metadata?b.metadata(f.metadata):null;var n="html5"===f.metadata.type&&H?H[f.metadata.name]:null,p=b.data(f.metadata.name||"qtipopts");try{p="string"===typeof p?c.parseJSON(p):p}catch(J){}H=c.extend(!0,{},B.defaults,f,"object"===
    typeof p?h(p):null,h(n||H));f=H.position;H.id=d;if("boolean"===typeof H.content.text)if(e=b.attr(H.content.attr),!1!==H.content.attr&&e)H.content.text=e;else return!1;f.container.length||(f.container=l);!1===f.target&&(f.target=m);!1===H.show.target&&(H.show.target=m);!0===H.show.solo&&(H.show.solo=f.container.closest("body"));!1===H.hide.target&&(H.hide.target=m);!0===H.position.viewport&&(H.position.viewport=f.container);f.container=f.container.eq(0);f.at=new D(f.at,!0);f.my=new D(f.my);if(b.data("qtip"))if(H.overwrite)b.qtip("destroy");
    else if(!1===H.overwrite)return!1;b.attr("data-hasqtip",d);H.suppress&&(g=b.attr("title"))&&b.removeAttr("title").attr("oldtitle",g).attr("title","");e=new a(b,H,d,!!e);b.data("qtip",e);b.one("remove.qtip-"+d+" removeqtip.qtip-"+d,function(){var a;(a=c(this).data("qtip"))&&a.destroy()});return e}function F(a){return a.charAt(0).toUpperCase()+a.slice(1)}function C(a,c){var b=parseInt,d;a:{d=c.charAt(0).toUpperCase()+c.slice(1);d=(c+" "+R.join(d+" ")+d).split(" ");var f,e,h=0;if(P[c])d=a.css(P[c]);
    else{for(;f=d[h++];)if((e=a.css(f))!==g){d=(P[c]=f,e);break a}d=void 0}}return b(d,10)}function q(a,c){this._ns="tip";this.options=c;this.offset=c.offset;this.size=[c.width,c.height];this.init(this.qtip=a)}var B,n,D,r,y={},Q=["ui-widget","ui-tooltip"],z="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),w="qtip-disabled",K;BROWSER={ie:function(){for(var a=3,c=k.createElement("div");(c.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e")&&c.getElementsByTagName("i")[0];);
        return 4<a?a:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1};n=a.prototype;n.render=function(a){if(this.rendered||this.destroyed)return this;var b=this,d=this.options,f=this.cache,e=this.elements,h=d.content.text,g=d.content.title,k=d.content.button,l=d.position,m="."+this._id+" ",n=[];c.attr(this.target[0],"aria-describedby",this._id);this.tooltip=e.tooltip=
        tooltip=c("<div/>",{id:this._id,"class":["qtip qtip-default",d.style.classes,"qtip-pos-"+d.position.my.abbrev()].join(" "),width:d.style.width||"",height:d.style.height||"",tracking:"mouse"===l.target&&l.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":!1,"aria-describedby":this._id+"-content","aria-hidden":!0}).toggleClass(w,this.disabled).attr("data-qtip-id",this.id).data("qtip",this).appendTo(l.container).append(e.content=c("<div />",{"class":"qtip-content",id:this._id+"-content","aria-atomic":!0}));
        this.rendered=-1;this.positioning=!0;g&&(this._createTitle(),c.isFunction(g)||n.push(this._updateTitle(g,!1)));k&&this._createButton();c.isFunction(h)||n.push(this._updateContent(h,!1));this.rendered=!0;this._setWidget();c.each(d.events,function(a,b){c.isFunction(b)&&tooltip.bind(("toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a]).join(m)+m,b)});c.each(y,function(a){var c;"render"===this.initialize&&(c=this(b))&&(b.plugins[a]=c)});this._assignEvents();c.when.apply(c,n).then(function(){b._trigger("render");
            b.positioning=!1;b.hiddenDuringWait||!d.show.ready&&!a||b.toggle(!0,f.event,!1);b.hiddenDuringWait=!1});B.api[this.id]=this;return this};n.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=!0;var a=this.target,d=a.attr("oldtitle");this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove();c.each(this.plugins,function(a){this.destroy&&this.destroy()});clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this._unassignEvents();a.removeData("qtip").removeAttr("data-qtip-id").removeAttr("aria-describedby");
        this.options.suppress&&d&&a.attr("title",d).removeAttr("oldtitle");this._unbind(a);this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=null;delete B.api[this.id]}}if(this.destroyed)return this.target;!0!==a&&this.rendered?(tooltip.one("tooltiphidden",c.proxy(b,this)),!this.triggering&&this.hide()):b.call(this);return this.target};r=n.checks={builtin:{"^id$":function(a,b,d,f){d=!0===d?B.nextid:d;var e="qtip-"+d;!1!==d&&0<d.length&&!c("#"+e).length?(this._id=e,this.rendered&&(this.tooltip[0].id=
        this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=f},"^prerender":function(a,c,b){b&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,c,b){this._updateContent(b)},"^content.attr$":function(a,c,b,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(b))},"^content.title$":function(a,c,b){if(!b)return this._removeTitle();b&&!this.elements.title&&this._createTitle();this._updateTitle(b)},
        "^content.button$":function(a,c,b){this._updateButton(b)},"^content.title.(text|button)$":function(a,c,b){this.set("content."+c,b)},"^position.(my|at)$":function(a,c,b){"string"===typeof b&&(a[c]=new D(b,"at"===c))},"^position.container$":function(a,c,b){this.tooltip.appendTo(b)},"^show.ready$":function(a,c,b){b&&(!this.rendered&&this.render(!0)||this.toggle(!0))},"^style.classes$":function(a,c,b,d){this.tooltip.removeClass(d).addClass(b)},"^style.width|height":function(a,c,b){this.tooltip.css(c,
            b)},"^style.widget|content.title":function(){this._setWidget()},"^style.def":function(a,c,b){this.tooltip.toggleClass("qtip-default",!!b)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,d){tooltip[(c.isFunction(d)?"":"un")+"bind"]("tooltip"+b,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=this.options.position;tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse);this._unassignEvents();this._assignEvents()}}};n.get=function(a){if(this.destroyed)return this;
        a=d(this.options,a.toLowerCase());a=a[0][a[1]];return a.precedance?a.string():a};var L=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,O=/^prerender|show\.ready/i;n.set=function(a,b){if(this.destroyed)return this;var f=this.rendered,e=!1,g=this.options,k;"string"===typeof a?(k=a,a={},a[k]=b):a=c.extend({},a);c.each(a,function(b,G){if(f||O.test(b)){var h=d(g,b.toLowerCase()),k;k=h[0][h[1]];h[0][h[1]]=G&&G.nodeType?c(G):G;e=L.test(b)||e;a[b]=[h[0],h[1],G,k]}else delete a[b]});
        h(g);this.positioning=!0;c.each(a,c.proxy(p,this));this.positioning=!1;this.rendered&&0<this.tooltip[0].offsetWidth&&e&&this.reposition("mouse"===g.position.target?null:this.cache.event);return this};n._update=function(a,b,d){var f=this,e=this.cache;if(!this.rendered||!a)return!1;c.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||"");if(c.isFunction(a.then))return e.waiting=!0,a.then(function(a){e.waiting=!1;return f._update(a,b)},null,function(a){return f._update(a,b)});if(!1===a||!a&&
        ""!==a)return!1;a.jquery&&0<a.length?b.children().detach().end().append(a.css({display:"block"})):b.html(a);e.waiting=!0;return(c.fn.imagesLoaded?b.imagesLoaded():c.Deferred().resolve(c([]))).done(function(a){e.waiting=!1;a.length&&f.rendered&&0<f.tooltip[0].offsetWidth&&f.reposition(e.event,!a.length)}).promise()};n._updateContent=function(a,c){this._update(a,this.elements.content,c)};n._updateTitle=function(a,c){!1===this._update(a,this.elements.title,c)&&this._removeTitle(!1)};n._createTitle=function(){var a=
        this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle();a.titlebar=c("<div />",{"class":"qtip-titlebar "+(this.options.style.widget?E("header"):"")}).append(a.title=c("<div />",{id:b,"class":"qtip-title","aria-atomic":!0})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){c(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(a){c(this).toggleClass("ui-state-hover",
        "mouseover"===a.type)});this.options.content.button&&this._createButton()};n._removeTitle=function(a){var c=this.elements;c.title&&(c.titlebar.remove(),c.titlebar=c.title=c.button=null,!1!==a&&this.reposition())};n.reposition=function(a,b){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=!0;var d=this.cache,f=this.tooltip,h=this.options.position,g=h.target,l=h.my,m=h.at,n=h.viewport,p=h.container,J=h.adjust,q=J.method.split(" "),t=f.outerWidth(!1),v=f.outerHeight(!1),
        r=0,u=0,E=f.css("position"),x={left:0,top:0},w=0<f[0].offsetWidth,C=a&&"scroll"===a.type,B=c(e),A=p[0].ownerDocument,D=this.mouse,z,F;if(c.isArray(g)&&2===g.length)m={x:"left",y:"top"},x={left:g[0],top:g[1]};else if("mouse"===g&&(a&&a.pageX||d.event.pageX))m={x:"left",y:"top"},a=!D||!D.pageX||!J.mouse&&a&&a.pageX?(!a||"resize"!==a.type&&"scroll"!==a.type?a&&a.pageX&&"mousemove"===a.type?a:(!J.mouse||this.options.show.distance)&&d.origin&&d.origin.pageX?d.origin:a:d.event)||a||d.event||D||{}:D,"static"!==
    E&&(x=p.offset()),A.body.offsetWidth!==(e.innerWidth||A.documentElement.clientWidth)&&(F=c(A.body).offset()),x={left:a.pageX-x.left+(F&&F.left||0),top:a.pageY-x.top+(F&&F.top||0)},J.mouse&&C&&(x.left-=D.scrollX-B.scrollLeft(),x.top-=D.scrollY-B.scrollTop());else{"event"===g&&a&&a.target&&"scroll"!==a.type&&"resize"!==a.type?d.target=c(a.target):"event"!==g&&(d.target=c(g.jquery?g:elements.target));g=d.target;g=c(g).eq(0);if(0===g.length)return this;g[0]===k||g[0]===e?(r=BROWSER.iOS?e.innerWidth:g.width(),
        u=BROWSER.iOS?e.innerHeight:g.height(),g[0]===e&&(x={top:(n||g).scrollTop(),left:(n||g).scrollLeft()})):y.imagemap&&g.is("area")?z=y.imagemap(this,g,m,y.viewport?q:!1):y.svg&&g[0].ownerSVGElement?z=y.svg(this,g,m,y.viewport?q:!1):(r=g.outerWidth(!1),u=g.outerHeight(!1),x=g.offset());z&&(r=z.width,u=z.height,F=z.offset,x=z.position);x=this.reposition.offset(g,x,p);if(3.1<BROWSER.iOS&&4.1>BROWSER.iOS||4.3<=BROWSER.iOS&&4.33>BROWSER.iOS||!BROWSER.iOS&&"fixed"===E)x.left-=B.scrollLeft(),x.top-=B.scrollTop();
        if(!z||z&&!1!==z.adjustable)x.left+="right"===m.x?r:"center"===m.x?r/2:0,x.top+="bottom"===m.y?u:"center"===m.y?u/2:0}x.left+=J.x+("right"===l.x?-t:"center"===l.x?-t/2:0);x.top+=J.y+("bottom"===l.y?-v:"center"===l.y?-v/2:0);y.viewport?(x.adjusted=y.viewport(this,x,h,r,u,t,v),F&&x.adjusted.left&&(x.left+=F.left),F&&x.adjusted.top&&(x.top+=F.top)):x.adjusted={left:0,top:0};if(!this._trigger("move",[x,n.elem||n],a))return this;delete x.adjusted;!1===b||!w||isNaN(x.left)||isNaN(x.top)||"mouse"===g||!c.isFunction(h.effect)?
        f.css(x):c.isFunction(h.effect)&&(h.effect.call(f,this,c.extend({},x)),f.queue(function(a){c(this).css({opacity:"",height:""});BROWSER.ie&&this.style.removeAttribute("filter");a()}));this.positioning=!1;return this};n.reposition.offset=function(a,b,d){if(!d[0])return b;a=c(a[0].ownerDocument);var f=!!BROWSER.ie&&"CSS1Compat"!==k.compatMode;d=d[0];var e,h,g;do if("static"!==(h=c.css(d,"position"))){if("fixed"===h){h=d.getBoundingClientRect();var l=a;b.left+=-1*l.scrollLeft();b.top+=-1*l.scrollTop()}else h=
        c(d).position(),h.left+=parseFloat(c.css(d,"borderLeftWidth"))||0,h.top+=parseFloat(c.css(d,"borderTopWidth"))||0;b.left-=h.left+(parseFloat(c.css(d,"marginLeft"))||0);b.top-=h.top+(parseFloat(c.css(d,"marginTop"))||0);e||"hidden"===(g=c.css(d,"overflow"))||"visible"===g||(e=c(d))}while(d=d.offsetParent);e&&(e[0]!==a[0]||f)&&(b.left+=1*e.scrollLeft(),b.top+=1*e.scrollTop());return b};var I=(D=n.reposition.Corner=function(a,c){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase();
        this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase();this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!c;var b=a.charAt(0);this.precedance="t"===b||"b"===b?"y":"x"}).prototype;I.invert=function(a,c){this[a]="left"===this[a]?"right":"right"===this[a]?"left":c||this[a]};I.string=function(){var a=this.x,c=this.y;return a===c?a:"y"===this.precedance||this.forceY&&"center"!==c?c+" "+a:a+" "+c};I.abbrev=function(){var a=this.string().split(" ");
        return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")};I.clone=function(){return new D(this.string(),this.forceY)};n.toggle=function(a,b,d){var f=this.cache,e=this.options,h=this.tooltip;if(b){if(/over|enter/.test(b.type)&&/out|leave/.test(f.event.type)&&e.show.target.add(b.target).length===e.show.target.length&&h.has(b.relatedTarget).length)return this;f.event=c.extend({},b)}this.waiting&&!a&&(this.hiddenDuringWait=!0);if(!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;
        var e=a?"show":"hide",g=this.options[e],l=this.options.position,m=this.options.content,n=this.tooltip.css("width"),p=0<this.tooltip[0].offsetWidth,q=a||1===g.target.length,t=!b||2>g.target.length||f.target[0]===b.target;(typeof a).search("boolean|number")&&(a=!p);t=(p=!h.is(":animated")&&p===a&&t)?null:!!this._trigger(e,[90]);!1!==t&&a&&this.focus(b);if(!t||p)return this;c.attr(h[0],"aria-hidden",!a);a?(f.origin=c.extend({},this.mouse),c.isFunction(m.text)&&this._updateContent(m.text,!1),c.isFunction(m.title)&&
        this._updateTitle(m.title,!1),!K&&"mouse"===l.target&&l.adjust.mouse&&(c(k).bind("mousemove.qtip",this._storeMouse),K=!0),n||h.css("width",h.outerWidth(!1)),this.reposition(b,d),n||h.css("width",""),g.solo&&("string"===typeof g.solo?c(g.solo):c(".qtip",g.solo)).not(h).not(g.target).qtip("hide",c.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete f.origin,K&&!c('.qtip[tracking="true"]:visible',g.solo).not(h).length&&(c(k).unbind("mousemove.qtip"),K=!1),this.blur(b));after=c.proxy(function(){a?
            (BROWSER.ie&&h[0].style.removeAttribute("filter"),h.css("overflow",""),"string"===typeof g.autofocus&&c(this.options.show.autofocus,h).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):h.css({display:"",visibility:"",opacity:"",left:"",top:""});this._trigger(a?"visible":"hidden")},this);!1===g.effect||!1===q?(h[e](),after()):c.isFunction(g.effect)?(h.stop(1,1),g.effect.call(h,this),h.queue("fx",function(a){after();a()})):h.fadeTo(90,a?1:0,after);a&&g.target.trigger("qtip-"+this.id+
            "-inactive");return this};n.show=function(a){return this.toggle(!0,a)};n.hide=function(a){return this.toggle(!1,a)};n.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=c(".qtip"),d=this.tooltip,f=parseInt(d[0].style.zIndex,10),e=B.zindex+b.length;!d.hasClass("qtip-focus")&&this._trigger("focus",[e],a)&&(f!==e&&(b.each(function(){this.style.zIndex>f&&--this.style.zIndex}),b.filter(".qtip-focus").qtip("blur",a)),d.addClass("qtip-focus")[0].style.zIndex=e);return this};n.blur=function(a){if(!this.rendered||
        this.destroyed)return this;this.tooltip.removeClass("qtip-focus");this._trigger("blur",[this.tooltip.css("zIndex")],a);return this};n.disable=function(a){if(this.destroyed)return this;"boolean"!==typeof a&&(a=!(this.tooltip.hasClass(w)||this.disabled));this.rendered&&this.tooltip.toggleClass(w,a).attr("aria-disabled",a);this.disabled=!!a;return this};n.enable=function(){return this.disable(!1)};n._createButton=function(){var a=this,b=this.elements,d=b.tooltip,f=this.options.content.button,e="string"===
    typeof f?f:"Close tooltip";b.button&&b.button.remove();b.button=f.jquery?f:c("<a />",{"class":"qtip-close "+(this.options.style.widget?"":"qtip-icon"),title:e,"aria-label":e}).prepend(c("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));b.button.appendTo(b.titlebar||d).attr("role","button").click(function(c){d.hasClass(w)||a.hide(c);return!1})};n._updateButton=function(a){if(!this.rendered)return!1;var c=this.elements.button;a?this._createButton():c.remove()};n._setWidget=function(){var a=
        this.options.style.widget,c=this.elements,b=c.tooltip,d=b.hasClass(w);b.removeClass(w);w=a?"ui-state-disabled":"qtip-disabled";b.toggleClass(w,d);b.toggleClass("ui-helper-reset "+E(),a).toggleClass("qtip-default",this.options.style.def&&!a);c.content&&c.content.toggleClass(E("content"),a);c.titlebar&&c.titlebar.toggleClass(E("header"),a);c.button&&c.button.toggleClass("qtip-icon",!a)};n._storeMouse=function(a){this.mouse={pageX:a.pageX,pageY:a.pageY,type:"mousemove",scrollX:e.pageXOffset||k.body.scrollLeft||
    k.documentElement.scrollLeft,scrollY:e.pageYOffset||k.body.scrollTop||k.documentElement.scrollTop}};n._bind=function(a,b,d,f,e){f="."+this._id+(f?"-"+f:"");b.length&&c(a).bind((b.split?b:b.join(f+" "))+f,c.proxy(d,e||this))};n._unbind=function(a,b){c(a).unbind("."+this._id+(b?"-"+b:""))};c(function(){A(".qtip",["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,d=c(a.currentTarget),f=c(a.relatedTarget||a.target),e=this.options;b?(this.focus(a),d.hasClass("qtip-fixed")&&!d.hasClass(w)&&
    clearTimeout(this.timers.hide)):"mouse"===e.position.target&&e.hide.event&&e.show.target&&!f.closest(e.show.target[0]).length&&this.hide(a);d.toggleClass("qtip-hover",b)});A("[data-qtip-id]",z,m)});n._trigger=function(a,b,d){a=c.Event("tooltip"+a);a.originalEvent=d&&c.extend({},d)||this.cache.event||null;this.triggering=!0;this.tooltip.trigger(a,[this].concat(b||[]));this.triggering=!1;return!a.isDefaultPrevented()};n._assignEvents=function(){var a=this.options,b=a.position,d=this.tooltip,f=a.show.target,
        h=a.hide.target,g=b.container,n=b.viewport,p=c(k);c(k.body);var q=c(e),r=a.show.event?c.trim(""+a.show.event).split(" "):[],J=a.hide.event?c.trim(""+a.hide.event).split(" "):[],u=[];/mouse(out|leave)/i.test(a.hide.event)&&"window"===a.hide.leave&&this._bind(p,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)});a.hide.fixed?h=h.add(d.addClass("qtip-fixed")):/mouse(over|enter)/i.test(a.show.event)&&this._bind(h,"mouseleave",function(){clearTimeout(this.timers.show)});
        -1<(""+a.hide.event).indexOf("unfocus")&&this._bind(g.closest("html"),["mousedown","touchstart"],function(a){var b=c(a.target),d=this.rendered&&!this.tooltip.hasClass(w)&&0<this.tooltip[0].offsetWidth,f=0<b.parents(".qtip").filter(this.tooltip[0]).length;b[0]===this.target[0]||b[0]===this.tooltip[0]||f||this.target.has(b[0]).length||!d||this.hide(a)});"number"===typeof a.hide.inactive&&(this._bind(f,"qtip-"+this.id+"-inactive",m),this._bind(h.add(d),B.inactiveEvents,m,"-inactive"));J=c.map(J,function(a){var b=
            c.inArray(a,r);if(-1<b&&h.add(f).length===h.length)u.push(r.splice(b,1)[0]);else return a});this._bind(f,r,t);this._bind(h,J,l);this._bind(f,u,function(a){(0<this.tooltip[0].offsetWidth?l:t).call(this,a)});this._bind(f.add(d),"mousemove",function(b){if("number"===typeof a.hide.distance){var c=this.cache.origin||{},d=this.options.hide.distance,f=Math.abs;(f(b.pageX-c.pageX)>=d||f(b.pageY-c.pageY)>=d)&&this.hide(b)}this._storeMouse(b)});"mouse"===b.target&&b.adjust.mouse&&(a.hide.event&&this._bind(f,
            ["mouseenter","mouseleave"],function(a){this.cache.onTarget="mouseenter"===a.type}),this._bind(p,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(w)&&0<this.tooltip[0].offsetWidth&&this.reposition(a)}));(b.adjust.resize||n.length)&&this._bind(c.event.special.resize?n:q,"resize",v);b.adjust.scroll&&this._bind(q.add(b.container),"scroll",v)};n._unassignEvents=function(){var a=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],
        this.options.position.viewport[0],this.options.position.container.closest("html")[0],e,k];this.rendered?this._unbind(c([]).pushStack(c.grep(a,function(a){return"object"===typeof a}))):c(a[0]).unbind("."+this._id+"-create")};B=c.fn.qtip=function(a,b,d){var f=(""+a).toLowerCase(),e=null,k=c.makeArray(arguments).slice(1),l=k[k.length-1],m=this[0]?c.data(this[0],"qtip"):null;if(!arguments.length&&m||"api"===f)return m;if("string"===typeof a)return this.each(function(){var a=c.data(this,"qtip");if(!a)return!0;
        l&&l.timeStamp&&(a.cache.event=l);if(!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,k);else if(d!==g||c.isPlainObject(b))a.set(b,d);else return e=a.get(b),!1}),null!==e?e:this;if("object"===typeof a||!arguments.length)return m=h(c.extend(!0,{},a)),B.bind.call(this,m,l)};B.bind=function(a,b){return this.each(function(d){function f(a){function b(){m.render("object"===typeof a||e.show.ready);h.show.add(h.hide).unbind(l)}if(m.disabled)return!1;m.cache.event=c.extend({},a);m.cache.target=a?c(a.target):
        [g];0<e.show.delay?(clearTimeout(m.timers.show),m.timers.show=setTimeout(b,e.show.delay),k.show!==k.hide&&h.hide.bind(k.hide,function(){clearTimeout(m.timers.show)})):b()}var e,h,k,l,m;d=c.isArray(a.id)?a.id[d]:a.id;d=!d||!1===d||1>d.length||B.api[d]?B.nextid++:d;l=".qtip-"+d+"-create";m=u(c(this),d,a);if(!1===m)return!0;B.api[d]=m;e=m.options;c.each(y,function(){"initialize"===this.initialize&&this(m)});h={show:e.show.target,hide:e.hide.target};k={show:c.trim(""+e.show.event).replace(/ /g,l+" ")+
    l,hide:c.trim(""+e.hide.event).replace(/ /g,l+" ")+l};/mouse(over|enter)/i.test(k.show)&&!/mouse(out|leave)/i.test(k.hide)&&(k.hide+=" mouseleave"+l);h.show.bind("mousemove"+l,function(a){m._storeMouse(a);m.cache.onTarget=!0});h.show.bind(k.show,f);(e.show.ready||e.prerender)&&f(b)})};B.api={};c.each({attr:function(a,b){if(this.length){var d=this[0],f=c.data(d,"qtip");if("title"===a&&f&&"object"===typeof f&&f.options.suppress){if(2>arguments.length)return c.attr(d,"oldtitle");f&&"title"===f.options.content.attr&&
    f.cache.attr&&f.set("content.text",b);return this.attr("oldtitle",b)}}return c.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(a){c([]);var b=c.fn.clone_replacedByqTip.apply(this,arguments);a||b.filter("[oldtitle]").attr("title",function(){return c.attr(this,"oldtitle")}).removeAttr("oldtitle");return b}},function(a,b){if(!b||c.fn[a+"_replacedByqTip"])return!0;var d=c.fn[a+"_replacedByqTip"]=c.fn[a];c.fn[a]=function(){return b.apply(this,arguments)||d.apply(this,arguments)}});c.ui||(c.cleanData_replacedByqTip=
        c.cleanData,c.cleanData=function(a){for(var b=0,d;(d=c(a[b])).length;b++)if(d.attr("data-hasqtip"))try{d.triggerHandler("removeqtip")}catch(f){}c.cleanData_replacedByqTip.apply(this,arguments)});B.version="2.1.1";B.nextid=0;B.inactiveEvents=z;B.zindex=15E3;B.defaults={prerender:!1,id:!1,overwrite:!0,suppress:!0,content:{text:!0,attr:"title",title:!1,button:!1},position:{my:"top left",at:"bottom right",target:!1,container:!1,viewport:!1,adjust:{x:0,y:0,mouse:!0,scroll:!0,resize:!0,method:"flipinvert flipinvert"},
        effect:function(a,b,d){c(this).animate(b,{duration:200,queue:!1})}},show:{target:!1,event:"mouseenter",effect:!0,delay:90,solo:!1,ready:!1,autofocus:!1},hide:{target:!1,event:"mouseleave",effect:!0,delay:0,fixed:!1,inactive:!1,leave:"window",distance:!1},style:{classes:"",widget:!1,width:!1,height:!1,def:!0},events:{render:null,move:null,show:null,hide:null,toggle:null,visible:null,hidden:null,focus:null,blur:null}};var N=!!k.createElement("canvas").getContext,S=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,
        P={},R=["Webkit","O","Moz","ms"];N||(createVML=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'});c.extend(q.prototype,{init:function(a){var b,d;d=this.element=a.elements.tip=c("<div />",{"class":"qtip-tip"}).prependTo(a.tooltip);N?(b=c("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=100,b.save()):(b=createVML("shape",'coordorigin="0,0"',"position:absolute;"),
        this.element.html(b+b),a._bind(c("*",d).add(d),["click","mousedown"],function(a){a.stopPropagation()},this._ns));a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&("top"===a.y||"center"===a.y&&this.element.position().top+
        this.size[1]/2+this.options.offset<b.outerHeight(!0))},_parseCorner:function(a){var b=this.qtip.options.position.my;!1===a||!1===b?a=!1:!0===a?a=new D(b.string()):a.string||(a=new D(a),a.fixed=!0);return a},_parseWidth:function(a,b,c){var d=this.qtip.elements;b="border"+F(b)+"Width";return(c?C(c,b):C(d.content,b)||C(this._useTitle(a)&&d.titlebar||d.content,b)||C(tooltip,b))||0},_parseRadius:function(a){var b=this.qtip.elements,c="border"+F(a.y)+F(a.x)+"Radius";return 9>BROWSER.ie?0:C(this._useTitle(a)&&
        b.titlebar||b.content,c)||C(b.tooltip,c)||0},_invalidColour:function(a,b,c){b=a.css(b);return!b||c&&b===a.css(c)||S.test(b)?!1:b},_parseColours:function(a){var b=this.qtip.elements,d=this.element.css("cssText",""),f="border"+F(a[a.precedance])+F("color");a=this._useTitle(a)&&b.titlebar||b.content;var e=this._invalidColour,h=[];h[0]=e(d,"background-color")||e(a,"background-color")||e(b.content,"background-color")||e(tooltip,"background-color")||d.css("background-color");h[1]=e(d,f,"color")||e(a,f,
            "color")||e(b.content,f,"color")||e(tooltip,f,"color")||tooltip.css(f);c("*",d).add(d).css("cssText","background-color:transparent !important;border:0 !important;");return h},_calculateSize:function(a){var b="y"===a.precedance,c=this.options[b?"height":"width"],d=this.options[b?"width":"height"],f="c"===a.abbrev(),e=c*(f?.5:1),h=Math.pow;a=Math.round;var g=Math.sqrt(h(e,2)+h(d,2)),e=[this.border/e*g,this.border/d*g];e[2]=Math.sqrt(h(e[0],2)-h(this.border,2));e[3]=Math.sqrt(h(e[1],2)-h(this.border,
            2));f=(g+e[2]+e[3]+(f?0:e[0]))/g;c=[a(f*c),a(f*d)];return b?c:c.reverse()},_calculateTip:function(a){var b=this.size[0],c=this.size[1],d=Math.ceil(b/2),f=Math.ceil(c/2),b={br:[0,0,b,c,b,0],bl:[0,0,b,0,0,c],tr:[0,c,b,0,b,c],tl:[0,0,0,c,b,c],tc:[0,c,d,0,b,c],bc:[0,0,b,0,d,c],rc:[0,0,b,f,0,c],lc:[b,0,b,c,0,f]};b.lt=b.br;b.rt=b.bl;b.lb=b.tr;b.rb=b.tl;return b[a.abbrev()]},create:function(){var a=this.corner=(N||BROWSER.ie)&&this._parseCorner(this.options.corner);if(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())this.qtip.cache.corner=
        a.clone(),this.update();this.element.toggle(this.enabled);return this.corner},update:function(a,b){if(!this.enabled)return this;var d=this.element,f=d.children(),e=this.options,h=this.size,g=e.mimic,k=Math.round,l,m,n,p;a||(a=this.qtip.cache.corner||this.corner);!1===g?g=a:(g=new D(g),g.precedance=a.precedance,"inherit"===g.x?g.x=a.x:"inherit"===g.y?g.y=a.y:g.x===g.y&&(g[a.precedance]=a[a.precedance]));m=g.precedance;"x"===a.precedance?this._swapDimensions():this._resetDimensions();l=this.color=this._parseColours(a);
        "transparent"!==l[1]?(p=this.border=this._parseWidth(a,a[a.precedance]),e.border&&1>p&&(l[0]=l[1]),this.border=p=!0!==e.border?e.border:p):this.border=p=0;n=this._calculateTip(g);e=this.size=this._calculateSize(a);d.css({width:e[0],height:e[1],lineHeight:e[1]+"px"});d="y"===a.precedance?[k("left"===g.x?p:"right"===g.x?e[0]-h[0]-p:(e[0]-h[0])/2),k("top"===g.y?e[1]-h[1]:0)]:[k("left"===g.x?e[0]-h[0]:0),k("top"===g.y?p:"bottom"===g.y?e[1]-h[1]-p:(e[1]-h[1])/2)];N?(f.attr("width",e[0]).attr("height",
            e[1]),f=f[0].getContext("2d"),f.restore(),f.save(),f.clearRect(0,0,3E3,3E3),f.fillStyle=l[0],f.strokeStyle=l[1],f.lineWidth=2*p,f.translate(d[0],d[1]),f.beginPath(),f.moveTo(n[0],n[1]),f.lineTo(n[2],n[3]),f.lineTo(n[4],n[5]),f.closePath(),p&&("border-box"===tooltip.css("background-clip")&&(f.strokeStyle=l[0],f.stroke()),f.strokeStyle=l[1],f.stroke()),f.fill()):(n="m"+n[0]+","+n[1]+" l"+n[2]+","+n[3]+" "+n[4]+","+n[5]+" xe",d[2]=p&&/^(r|b)/i.test(a.string())?8===BROWSER.ie?2:1:0,f.css({coordsize:h[0]+
        p+" "+(h[1]+p),antialias:""+(-1<g.string().indexOf("center")),left:d[0]-d[2]*Number("x"===m),top:d[1]-d[2]*Number("y"===m),width:h[0]+p,height:h[1]+p}).each(function(a){var b=c(this);b[b.prop?"prop":"attr"]({coordsize:h[0]+p+" "+(h[1]+p),path:n,fillcolor:l[0],filled:!!a,stroked:!a}).toggle(!(!p&&!a));!a&&b.html(createVML("stroke",'weight="'+2*p+'px" color="'+l[1]+'" miterlimit="1000" joinstyle="miter"'))}));!1!==b&&this.calculate(a)},calculate:function(a){if(!this.enabled)return!1;var b=this,d=this.qtip.elements,
        f=this.element,e=this.options.offset;this.qtip.tooltip.hasClass("ui-widget");var h={},g,k,l;a=a||this.corner;g=a.precedance;k=this._calculateSize(a);l=[a.x,a.y];"x"===g&&l.reverse();c.each(l,function(c,f){var l,m,n;"center"===f?(l="y"===g?"left":"top",h[l]="50%",h["margin-"+l]=-Math.round(k["y"===g?0:1]/2)+e):(l=b._parseWidth(a,f,d.tooltip),m=b._parseWidth(a,f,d.content),n=b._parseRadius(a),h[f]=Math.max(-b.border,c?m:e+(n>l?n:-l)))});h[a[g]]-=k["x"===g?0:1];f.css({margin:"",top:"",bottom:"",left:"",
        right:""}).css(h);return h},reposition:function(a,b,c,d){if(this.enabled){a=b.cache;d=this.corner.clone();var f=c.adjusted,e=b.options.position.adjust.method.split(" ");b=e[0];var e=e[1]||e[0],h=!1,k=!1,l=0,m=0,n,p={},q;!0!==this.corner.fixed&&("shift"===b&&"x"===d.precedance&&f.left&&"center"!==d.y?d.precedance="x"===d.precedance?"y":"x":"shift"!==b&&f.left&&(d.x="center"===d.x?0<f.left?"left":"right":"left"===d.x?"right":"left"),"shift"===e&&"y"===d.precedance&&f.top&&"center"!==d.x?d.precedance=
        "y"===d.precedance?"x":"y":"shift"!==e&&f.top&&(d.y="center"===d.y?0<f.top?"top":"bottom":"top"===d.y?"bottom":"top"),d.string()===a.corner.string()||a.cornerTop===f.top&&a.cornerLeft===f.left||this.update(d,!1));n=this.calculate(d,f);n.right!==g&&(n.left=-n.right);n.bottom!==g&&(n.top=-n.bottom);n.user=this.offset;if(h="shift"===b&&!!f.left)"center"===d.x?p["margin-left"]=l=n["margin-left"]-f.left:(q=n.right!==g?[f.left,-n.left]:[-f.left,n.left],(l=Math.max(q[0],q[1]))>q[0]&&(c.left-=f.left,h=!1),
        p[n.right!==g?"right":"left"]=l);if(k="shift"===e&&!!f.top)"center"===d.y?p["margin-top"]=m=n["margin-top"]-f.top:(q=n.bottom!==g?[f.top,-n.top]:[-f.top,n.top],(m=Math.max(q[0],q[1]))>q[0]&&(c.top-=f.top,k=!1),p[n.bottom!==g?"bottom":"top"]=m);this.element.css(p).toggle(!(l&&m||"center"===d.x&&m||"center"===d.y&&l));c.left-=n.left.charAt?n.user:"shift"!==b||k||!h&&!k?n.left:0;c.top-=n.top.charAt?n.user:"shift"!==e||h||!h&&!k?n.top:0;a.cornerLeft=f.left;a.cornerTop=f.top;a.corner=d.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,
        this._ns);this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}});n=y.tip=function(a){return new q(a,a.options.style.tip)};n.initialize="render";n.sanitize=function(a){a.style&&"tip"in a.style&&(opts=a.style.tip,"object"!==typeof opts&&(opts=a.style.tip={corner:opts}),/string|boolean/i.test(typeof opts.corner)||(opts.corner=!0))};r.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=
        size=[a.width,a.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};c.extend(!0,B.defaults,{style:{tip:{corner:!0,mimic:!1,width:6,height:6,border:!0,offset:0}}})})})(window,document);
(function(e){if(!e.requestAnimationFrame){var k=Date.now||function(){return+new Date},g=Object.keys||function(a){var b={},c;for(c in a)b[c]=!0;return b},c=Object.empty||function(a){for(var b in a)return!1;return!0},a=function(){for(var a=["webkit","moz","o","ms"],b=0;4>b;b++)if(null!=e[a[b]+"RequestAnimationFrame"])return a[b]}();if(a)e.requestAnimationFrame=e[a+"RequestAnimationFrame"],e.cancelRequestAnimationFrame=e[a+"CancelRequestAnimationFrame"];else{var b={},f=1,h=null;e.requestAnimationFrame=
    function(a,c){var e=f++;b[e]=a;null===h&&(h=setTimeout(function(){var a=k(),c=b,d=g(c);b={};h=null;for(var f=0,e=d.length;f<e;f++)c[d[f]](a)},1E3/60));return e};e.cancelRequestAnimationFrame=function(a){delete b[a];c(b)&&(clearTimeout(h),h=null)}}}})(this);
(function(e){var k=Date.now||function(){return+new Date},g={},c=1;e.core?core.effect||(core.effect={}):e.core={effect:{}};core.effect.Animate={stop:function(a){var b=null!=g[a];b&&(g[a]=null);return b},isRunning:function(a){return null!=g[a]},start:function(a,b,f,e,d,p){var E=k(),t=E,l=0,m=0,v=c++;p||(p=document.body);if(0===v%20){var A={},u;for(u in g)A[u]=!0;g=A}var F=function(c){c=!0!==c;var q=k();if(!g[v]||b&&!b(v))g[v]=null,f&&f(60-m/((q-E)/1E3),v,!1);else{if(c)for(var u=Math.round((q-t)/(1E3/
        60))-1,n=0;n<Math.min(u,4);n++)F(!0),m++;e&&(l=(q-E)/e,1<l&&(l=1));u=d?d(l):l;!1!==a(u,q,c)&&1!==l||!c?c&&(t=q,requestAnimationFrame(F,p)):(g[v]=null,f&&f(60-m/((q-E)/1E3),v,1===l||null==e))}};g[v]=!0;requestAnimationFrame(F,p);return v}}})(this);
var EasyScroller=function(e,k){this.content=e;this.container=e.parentNode;this.options=k||{};var g=this;this.scroller=new Scroller(function(c,a,b){g.render(c,a,b)},k);this.bindEvents();this.content.style[EasyScroller.vendorPrefix+"TransformOrigin"]="left top";this.reflow()};
EasyScroller.prototype.render=function(){var e=document.documentElement.style,k;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?k="presto":"MozAppearance"in e?k="gecko":"WebkitAppearance"in e?k="webkit":"string"===typeof navigator.cpuClass&&(k="trident");e=EasyScroller.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[k];k=document.createElement("div");var g=e+"Transform";return void 0!==k.style[e+"Perspective"]?function(c,a,b){this.content.style[g]="translate3d("+
    -c+"px,"+-a+"px,0) scale("+b+")"}:void 0!==k.style[g]?function(c,a,b){this.content.style[g]="translate("+-c+"px,"+-a+"px) scale("+b+")"}:function(c,a,b){this.content.style.marginLeft=c?-c/b+"px":"";this.content.style.marginTop=a?-a/b+"px":"";this.content.style.zoom=b||""}}();
EasyScroller.prototype.reflow=function(){this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var e=this.container.getBoundingClientRect();this.scroller.setPosition(e.left+this.container.clientLeft,e.top+this.container.clientTop)};
EasyScroller.prototype.bindEvents=function(){var e=this;$(window).bind("resize",function(){e.reflow()});$("#modelTab").bind("click",function(){e.reflow()});if("ontouchstart"in window)this.container.addEventListener("touchstart",function(g){g.touches[0]&&g.touches[0].target&&g.touches[0].target.tagName.match(/input|textarea|select/i)||(e.scroller.doTouchStart(g.touches,(new Date).getTime()),g.preventDefault())},!1),document.addEventListener("touchmove",function(g){e.scroller.doTouchMove(g.touches,
    (new Date).getTime(),g.scale)},!1),document.addEventListener("touchend",function(g){e.scroller.doTouchEnd((new Date).getTime())},!1),document.addEventListener("touchcancel",function(g){e.scroller.doTouchEnd((new Date).getTime())},!1);else{var k=!1;$(this.container).bind("mousedown",function(g){g.target.tagName.match(/input|textarea|select/i)||(e.scroller.doTouchStart([{pageX:g.pageX,pageY:g.pageY}],(new Date).getTime()),k=!0,g.preventDefault())});$(document).bind("mousemove",function(g){k&&(e.scroller.doTouchMove([{pageX:g.pageX,
    pageY:g.pageY}],(new Date).getTime()),k=!0)});$(document).bind("mouseup",function(g){k&&(e.scroller.doTouchEnd((new Date).getTime()),k=!1)});$(this.container).bind("mousewheel",function(g){e.options.zooming&&(e.scroller.doMouseZoom(g.wheelDelta,(new Date).getTime(),g.pageX,g.pageY),g.preventDefault())})}};var Scroller;
(function(){Scroller=function(a,b){this.__callback=a;this.options={scrollingX:!0,scrollingY:!0,animating:!0,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,eventTarget:null};for(var c in b)this.options[c]=b[c]};var e=function(a){return Math.pow(a-1,3)+1},k=function(a){return 1>(a/=.5)?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},g={__isSingleTouch:!1,__isTracking:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,
    __clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,
    __maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(a,b,c,e){a&&(this.__clientWidth=a);b&&(this.__clientHeight=b);c&&(this.__contentWidth=c);e&&(this.__contentHeight=e);this.__computeScrollMax();this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(a,b){this.__clientLeft=a||0;this.__clientTop=b||0},setSnapSize:function(a,b){this.__snapWidth=a;this.__snapHeight=b},activatePullToRefresh:function(a,b,c,e){this.__refreshHeight=
        a;this.__refreshActivate=b;this.__refreshDeactivate=c;this.__refreshStart=e},finishPullToRefresh:function(){this.__refreshActive=!1;this.__refreshDeactivate&&this.__refreshDeactivate();this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(a,b,c,e){if(!this.options.zooming)throw Error("Zooming is not enabled!");
        this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);var d=this.__zoomLevel;null==c&&(c=this.__clientWidth/2);null==e&&(e=this.__clientHeight/2);a=Math.max(Math.min(a,this.options.maxZoom),this.options.minZoom);this.__computeScrollMax(a);c=(c+this.__scrollLeft)*a/d-c;e=(e+this.__scrollTop)*a/d-e;c>this.__maxScrollLeft?c=this.__maxScrollLeft:0>c&&(c=0);e>this.__maxScrollTop?e=this.__maxScrollTop:0>e&&(e=0);this.__publish(c,e,a,b)},zoomBy:function(a,b,c,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       e){this.zoomTo(this.__zoomLevel*a,b,c,e)},scrollTo:function(a,b,c,e){$(document).trigger(this.options.eventTarget.attr("id")+".scrolledTo",[a,b,e]);this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);if(null!=e&&e!==this.__zoomLevel){if(!this.options.zooming)throw Error("Zooming is not enabled!");a*=e;b*=e;this.__computeScrollMax(e)}else e=this.__zoomLevel;this.options.scrollingX?this.options.paging?a=Math.round(a/this.__clientWidth)*this.__clientWidth:
    this.options.snapping&&(a=Math.round(a/this.__snapWidth)*this.__snapWidth):a=this.__scrollLeft;this.options.scrollingY?this.options.paging?b=Math.round(b/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(b=Math.round(b/this.__snapHeight)*this.__snapHeight):b=this.__scrollTop;a=Math.max(Math.min(this.__maxScrollLeft,a),0);b=Math.max(Math.min(this.__maxScrollTop,b),0);a===this.__scrollLeft&&b===this.__scrollTop&&(c=!1);this.__publish(a,b,e,c)},scrollBy:function(a,b,c){this.scrollTo((this.__isAnimating?
            this.__scheduledLeft:this.__scrollLeft)+(a||0),(this.__isAnimating?this.__scheduledTop:this.__scrollTop)+(b||0),c)},doMouseZoom:function(a,b,c,e){return this.zoomTo(this.__zoomLevel*(0<a?.97:1.03),!1,c-this.__clientLeft,e-this.__clientTop)},doTouchStart:function(a,b){if(null==a.length)throw Error("Invalid touch list: "+a);b instanceof Date&&(b=b.valueOf());if("number"!==typeof b)throw Error("Invalid timestamp value: "+b);this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=
        !1);this.__isAnimating&&(core.effect.Animate.stop(this.__isAnimating),this.__isAnimating=!1);var c,e,d=1===a.length;d?(c=a[0].pageX,e=a[0].pageY):(c=Math.abs(a[0].pageX+a[1].pageX)/2,e=Math.abs(a[0].pageY+a[1].pageY)/2);this.__initialTouchLeft=c;this.__initialTouchTop=e;this.__zoomLevelStart=this.__zoomLevel;this.__lastTouchLeft=c;this.__lastTouchTop=e;this.__lastTouchMove=b;this.__lastScale=1;this.__enableScrollX=!d&&this.options.scrollingX;this.__enableScrollY=!d&&this.options.scrollingY;this.__isTracking=
        !0;this.__isDragging=!d;this.__isSingleTouch=d;this.__positions=[]},doTouchMove:function(a,b,c){if(null==a.length)throw Error("Invalid touch list: "+a);b instanceof Date&&(b=b.valueOf());if("number"!==typeof b)throw Error("Invalid timestamp value: "+b);if(this.__isTracking){var e;2===a.length?(e=Math.abs(a[0].pageX+a[1].pageX)/2,a=Math.abs(a[0].pageY+a[1].pageY)/2):(e=a[0].pageX,a=a[0].pageY);var d=this.__positions;if(this.__isDragging){var g=e-this.__lastTouchLeft,k=a-this.__lastTouchTop,t=this.__scrollLeft,
        l=this.__scrollTop,m=this.__zoomLevel;if(null!=c&&this.options.zooming){var v=m,m=m/this.__lastScale*c,m=Math.max(Math.min(m,this.options.maxZoom),this.options.minZoom);if(v!==m){var A=e-this.__clientLeft,u=a-this.__clientTop,t=(A+t)*m/v-A,l=(u+l)*m/v-u;this.__computeScrollMax(m)}}this.__enableScrollX&&(t-=g,v=this.__maxScrollLeft,t>v||0>t)&&(t=this.options.bouncing?t+g/2:t>v?v:0);this.__enableScrollY&&(l-=k,g=this.__maxScrollTop,l>g||0>l)&&(this.options.bouncing?(l+=k/2,this.__enableScrollX||null==
    this.__refreshHeight||(!this.__refreshActive&&l<=-this.__refreshHeight?(this.__refreshActive=!0,this.__refreshActivate&&this.__refreshActivate()):this.__refreshActive&&l>-this.__refreshHeight&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))):l=l>g?g:0);60<d.length&&d.splice(0,30);d.push(t,l,b);this.__publish(t,l,m)}else k=this.options.locking?3:0,t=Math.abs(e-this.__initialTouchLeft),l=Math.abs(a-this.__initialTouchTop),this.__enableScrollX=this.options.scrollingX&&
        t>=k,this.__enableScrollY=this.options.scrollingY&&l>=k,d.push(this.__scrollLeft,this.__scrollTop,b),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(5<=t||5<=l);this.__lastTouchLeft=e;this.__lastTouchTop=a;this.__lastTouchMove=b;this.__lastScale=c}},doTouchEnd:function(a){a instanceof Date&&(a=a.valueOf());if("number"!==typeof a)throw Error("Invalid timestamp value: "+a);if(this.__isTracking){this.__isTracking=!1;if(this.__isDragging&&(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&
        100>=a-this.__lastTouchMove)){for(var b=this.__positions,c=b.length-1,e=c,d=c;0<d&&b[d]>this.__lastTouchMove-100;d-=3)e=d;e!==c&&(c=b[c]-b[e],d=this.__scrollTop-b[e-1],this.__decelerationVelocityX=(this.__scrollLeft-b[e-2])/c*(1E3/60),this.__decelerationVelocityY=d/c*(1E3/60),b=this.options.paging||this.options.snapping?4:1,Math.abs(this.__decelerationVelocityX)>b||Math.abs(this.__decelerationVelocityY)>b)&&(this.__refreshActive||this.__startDeceleration(a))}this.__isDecelerating||(this.__refreshActive&&
    this.__refreshStart?(this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()):(this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel),this.__refreshActive&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate())));this.__positions.length=0}},__publish:function(a,b,c,g){var d=this,p=d.__isAnimating;p&&(core.effect.Animate.stop(p),d.__isAnimating=!1);if(g&&d.options.animating){d.__scheduledLeft=a;d.__scheduledTop=
        b;d.__scheduledZoom=c;var E=d.__scrollLeft,t=d.__scrollTop,l=d.__zoomLevel,m=a-E,v=b-t,A=c-l;d.__isAnimating=core.effect.Animate.start(function(a,b,c){c&&(d.__scrollLeft=E+m*a,d.__scrollTop=t+v*a,d.__zoomLevel=l+A*a,d.__callback&&d.__callback(d.__scrollLeft,d.__scrollTop,d.__zoomLevel))},function(a){return d.__isAnimating===a},function(a,b,c){b===d.__isAnimating&&(d.__isAnimating=!1);d.options.zooming&&d.__computeScrollMax()},250,p?e:k)}else d.__scheduledLeft=d.__scrollLeft=a,d.__scheduledTop=d.__scrollTop=
        b,d.__scheduledZoom=d.__zoomLevel=c,d.__callback&&d.__callback(a,b,c),d.options.zooming&&d.__computeScrollMax()},__computeScrollMax:function(a){null==a&&(a=this.__zoomLevel);this.__maxScrollLeft=Math.max(this.__contentWidth*a-this.__clientWidth,0);this.__maxScrollTop=Math.max(this.__contentHeight*a-this.__clientHeight,0)},__startDeceleration:function(a){var b=this;if(b.options.paging){a=Math.max(Math.min(b.__scrollLeft,b.__maxScrollLeft),0);var c=Math.max(Math.min(b.__scrollTop,b.__maxScrollTop),
        0),e=b.__clientWidth,d=b.__clientHeight;b.__minDecelerationScrollLeft=Math.floor(a/e)*e;b.__minDecelerationScrollTop=Math.floor(c/d)*d;b.__maxDecelerationScrollLeft=Math.ceil(a/e)*e;b.__maxDecelerationScrollTop=Math.ceil(c/d)*d}else b.__minDecelerationScrollLeft=0,b.__minDecelerationScrollTop=0,b.__maxDecelerationScrollLeft=b.__maxScrollLeft,b.__maxDecelerationScrollTop=b.__maxScrollTop;var g=b.options.snapping?4:.1;b.__isDecelerating=core.effect.Animate.start(function(a,c,d){b.__stepThroughDeceleration(d)},
        function(){return Math.abs(b.__decelerationVelocityX)>=g||Math.abs(b.__decelerationVelocityY)>=g},function(a,c,d){b.__isDecelerating=!1;b.scrollTo(b.__scrollLeft,b.__scrollTop,b.options.snapping)})},__stepThroughDeceleration:function(a){var b=this.__scrollLeft+this.__decelerationVelocityX,c=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var e=Math.max(Math.min(this.__maxScrollLeft,b),0);e!==b&&(b=e,this.__decelerationVelocityX=0);e=Math.max(Math.min(this.__maxScrollTop,c),
        0);e!==c&&(c=e,this.__decelerationVelocityY=0)}a?this.__publish(b,c,this.__zoomLevel):(this.__scrollLeft=b,this.__scrollTop=c);this.options.paging||(this.__decelerationVelocityX*=.95,this.__decelerationVelocityY*=.95);this.options.bouncing&&(e=a=0,b<this.__minDecelerationScrollLeft?a=this.__minDecelerationScrollLeft-b:b>this.__maxDecelerationScrollLeft&&(a=this.__maxDecelerationScrollLeft-b),c<this.__minDecelerationScrollTop?e=this.__minDecelerationScrollTop-c:c>this.__maxDecelerationScrollTop&&(e=
        this.__maxDecelerationScrollTop-c),0!==a&&(this.__decelerationVelocityX=0>=a*this.__decelerationVelocityX?this.__decelerationVelocityX+.03*a:.08*a),0!==e&&(this.__decelerationVelocityY=0>=e*this.__decelerationVelocityY?this.__decelerationVelocityY+.03*e:.08*e))}},c;for(c in g)Scroller.prototype[c]=g[c]})();
(function(e){e(void 0).ready(function(){e("div#logo").hmm_logo({height_toggle:1,column_width:34,column_info:"#col_info",scaled_max:!0,help:1});0<e(".canvas_logo").length&&!/^.*?Helvetica Neue/.test(e(".canvas_logo").css("font-family"))&&e(".logo_wrapper").after('<div class="offset1 span11"><div id="message" class="alert alert-error"><span>It looks like you have set your browser to prevent loading fonts chosen by us. This may cause a significant drop in the quality of the logo rendered. For the best logo, we recommend allowing this site to choose its own fonts. Information on how to do this should be provided in the help documentation provided with your browser.</span></div></div>');
    0<e("#joyRideTipContent").length&&(e("#joyRideTipContent").joyride({autoStart:!0,localStorage:!1,localStorageKey:"joyride",postRideCallback:function(){e(".tour_control").show("slow")},preRideCallback:function(){e(".tour_control").hide()}}),e("#restart").on("click",function(){e("#joyRideTipContent").joyride("restart")}));if(window.FileReader)if(0<e("#file_upload").length&&1<=e("#file_upload").get(0).files.length){var k=new FileReader;k.onload=function(g){/^[\n\r\s]*HMMER/.test(g.target.result)&&/\/\/[\n\r\s]*$/.test(g.target.result)&&
    e(".processing").hide()};k.readAsText(e("#file_upload").get(0).files[0])}else e("#previous").data("type")?"hmm"===e("#previous").data("type")&&e(".processing").hide():e(".processing").hide();e("#file_upload").on("change",function(){if(window.FileReader&&1<=this.files.length){var g=new FileReader;g.onload=function(c){/^[\n\r\s]*HMMER/.test(c.target.result)&&/\/\/[\n\r\s]*$/.test(c.target.result)?(e("#hmm_process").prop("checked",!0),e(".processing").hide()):e(".processing").show()};g.readAsText(this.files[0])}});
    e.fn.tooltip=function(){e(this).each(function(){e(this).click(function(c){c.preventDefault()});var g=e("<p>");g.append(e(this).attr("title"));g.append("<br/>").append(e("<a>more</a>").attr("href",e(this).attr("href"))).html();e(this).qtip({content:{text:g},style:{classes:"qtip-bootstrap"},position:{my:"center left",at:"center right",target:e(this)},hide:{fixed:!0,delay:1E3,event:"mouseleave"},show:{solo:!0}})});return this};e(".help").tooltip();e("#showcase").carousel()})})(jQuery);